<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Tprrt's Blog</title><link href="https://tprrt.tupi.fr/" rel="alternate"/><link href="/feeds/all-en.atom.xml" rel="self"/><id>https://tprrt.tupi.fr/</id><updated>2025-12-31T10:00:00+01:00</updated><subtitle>Yet another blog about embedded Linux, the open source and hardware</subtitle><entry><title>Open-Source Game Engines for Retro Consoles</title><link href="https://tprrt.tupi.fr/retro-console-game-engines.html" rel="alternate"/><published>2025-12-31T10:00:00+01:00</published><updated>2025-12-31T10:00:00+01:00</updated><author><name>tperrot</name></author><id>tag:tprrt.tupi.fr,2025-12-31:/retro-console-game-engines.html</id><summary type="html">&lt;p class="first last"&gt;A guide to modern open-source game engines and frameworks for
developing games on classic consoles from 8-bit to sixth generation, all
compatible with Linux.&lt;/p&gt;
</summary><content type="html">&lt;div class="section" id="introduction"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="#toc-entry-1"&gt;Introduction&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Retro console development has experienced a renaissance in recent years,
thanks to passionate homebrew communities and modern open-source tooling.
What was once the domain of professional game studios with expensive
proprietary SDKs is now accessible to anyone with a Linux machine and a
passion for classic gaming hardware.&lt;/p&gt;
&lt;p&gt;This guide catalogs the best open-source game engines and frameworks
available for developing games on classic consoles, from the 8-bit Game
Boy Color to sixth generation systems like the PlayStation 2. All tools
mentioned are compatible with Linux development environments, making them
perfect for a fully free and open-source workflow.&lt;/p&gt;
&lt;div class="contents topic" id="table-of-contents"&gt;
&lt;p class="topic-title"&gt;&lt;a class="reference internal" href="#top"&gt;Table of Contents&lt;/a&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference internal" href="#introduction" id="toc-entry-1"&gt;Introduction&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="#bit-and-16-bit-consoles" id="toc-entry-2"&gt;8-bit and 16-bit Consoles&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class="reference internal" href="#game-boy-color-gbc" id="toc-entry-3"&gt;Game Boy Color (GBC)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="#game-boy-advance-gba" id="toc-entry-4"&gt;Game Boy Advance (GBA)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="#nintendo-ds-nds" id="toc-entry-5"&gt;Nintendo DS (NDS)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="#nintendo-3ds" id="toc-entry-6"&gt;Nintendo 3DS&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="#super-nintendo-snes" id="toc-entry-7"&gt;Super Nintendo (SNES)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="#sega-mega-drive-genesis" id="toc-entry-8"&gt;Sega Mega Drive / Genesis&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="#neo-geo" id="toc-entry-9"&gt;Neo Geo&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="#pc-engine-turbografx-16" id="toc-entry-10"&gt;PC Engine / TurboGrafx-16&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="#fifth-and-sixth-generation-consoles" id="toc-entry-11"&gt;Fifth and Sixth Generation Consoles&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class="reference internal" href="#sony-playstation-1-ps1" id="toc-entry-12"&gt;Sony PlayStation 1 (PS1)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="#sega-saturn" id="toc-entry-13"&gt;Sega Saturn&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="#nintendo-64" id="toc-entry-14"&gt;Nintendo 64&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="#sega-dreamcast" id="toc-entry-15"&gt;Sega Dreamcast&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="#sony-playstation-2-ps2" id="toc-entry-16"&gt;Sony PlayStation 2 (PS2)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="#nintendo-gamecube-wii" id="toc-entry-17"&gt;Nintendo GameCube / Wii&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="#sony-playstation-portable-psp" id="toc-entry-18"&gt;Sony PlayStation Portable (PSP)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="#playstation-vita" id="toc-entry-19"&gt;PlayStation Vita&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="#xbox-original" id="toc-entry-20"&gt;Xbox (Original)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="#development-tools-and-workflow" id="toc-entry-21"&gt;Development Tools and Workflow&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class="reference internal" href="#devkitpro-toolchain" id="toc-entry-22"&gt;DevkitPro Toolchain&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="#graphics-tools" id="toc-entry-23"&gt;Graphics Tools&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="#music-and-sound-tools" id="toc-entry-24"&gt;Music and Sound Tools&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="#emulators-for-testing" id="toc-entry-25"&gt;Emulators for Testing&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="#recommendations-by-experience-level" id="toc-entry-26"&gt;Recommendations by Experience Level&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class="reference internal" href="#beginner-friendly" id="toc-entry-27"&gt;Beginner-Friendly&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="#intermediate" id="toc-entry-28"&gt;Intermediate&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="#advanced" id="toc-entry-29"&gt;Advanced&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="#community-resources" id="toc-entry-30"&gt;Community Resources&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="#conclusion" id="toc-entry-31"&gt;Conclusion&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="bit-and-16-bit-consoles"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="#toc-entry-2"&gt;8-bit and 16-bit Consoles&lt;/a&gt;&lt;/h2&gt;
&lt;div class="section" id="game-boy-color-gbc"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="#toc-entry-3"&gt;Game Boy Color (GBC)&lt;/a&gt;&lt;/h3&gt;
&lt;div class="section" id="gb-studio"&gt;
&lt;h4&gt;GB Studio&lt;/h4&gt;
&lt;p&gt;For those wanting to create Game Boy games without writing code,
&lt;strong&gt;GB Studio&lt;/strong&gt; is the perfect starting point. This visual game editor
features a drag-and-drop interface that lets you build complete RPGs,
adventure games, platformers, and shooters without touching a single
line of code.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Key Features:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Full visual scene editor with intuitive drag-and-drop&lt;/li&gt;
&lt;li&gt;Built-in sprite and background editors&lt;/li&gt;
&lt;li&gt;Integrated music tracker&lt;/li&gt;
&lt;li&gt;Event system for complex game logic&lt;/li&gt;
&lt;li&gt;Exports to actual GB/GBC ROMs that run on real hardware&lt;/li&gt;
&lt;li&gt;Cross-platform support (Linux, Windows, macOS)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;License:&lt;/strong&gt; MIT&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Links:&lt;/strong&gt; &lt;a class="reference external" href="https://github.com/chrismaltby/gb-studio"&gt;GitHub&lt;/a&gt; |
&lt;a class="reference external" href="https://www.gbstudio.dev/"&gt;Website&lt;/a&gt; |
&lt;a class="reference external" href="https://www.gbstudio.dev/docs/"&gt;Documentation&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="gbdk-2020"&gt;
&lt;h4&gt;GBDK-2020&lt;/h4&gt;
&lt;p&gt;For developers who prefer code, &lt;strong&gt;GBDK-2020&lt;/strong&gt; is a modern fork of the
classic Game Boy Development Kit. It brings C99 support and modern
toolchain features to Game Boy development.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Key Features:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Modern C99 compiler&lt;/li&gt;
&lt;li&gt;ROM banking support for large games&lt;/li&gt;
&lt;li&gt;Libraries for sprites, backgrounds, and sound&lt;/li&gt;
&lt;li&gt;Compatible with both Game Boy and Game Boy Color&lt;/li&gt;
&lt;li&gt;Strong toolchain integration&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;License:&lt;/strong&gt; Various (mostly permissive)&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Links:&lt;/strong&gt; &lt;a class="reference external" href="https://github.com/gbdk-2020/gbdk-2020"&gt;GitHub&lt;/a&gt; |
&lt;a class="reference external" href="https://gbdk-2020.github.io/gbdk-2020/docs/api/"&gt;API Documentation&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="game-boy-advance-gba"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="#toc-entry-4"&gt;Game Boy Advance (GBA)&lt;/a&gt;&lt;/h3&gt;
&lt;div class="section" id="butano"&gt;
&lt;h4&gt;Butano&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;Butano&lt;/strong&gt; is a modern C++17 game engine built on devkitARM that makes
GBA development feel contemporary. It abstracts the hardware complexity
while still giving you full control over the system's capabilities.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Key Features:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Modern C++17 syntax and features&lt;/li&gt;
&lt;li&gt;Sprite management with affine transformations&lt;/li&gt;
&lt;li&gt;Regular and affine background layers&lt;/li&gt;
&lt;li&gt;Audio support (DMG and DirectSound)&lt;/li&gt;
&lt;li&gt;Scene management system&lt;/li&gt;
&lt;li&gt;GBA-optimized math utilities&lt;/li&gt;
&lt;li&gt;Documentation and examples&lt;/li&gt;
&lt;li&gt;Active Discord community&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;License:&lt;/strong&gt; zlib License&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Links:&lt;/strong&gt; &lt;a class="reference external" href="https://github.com/GValiente/butano"&gt;GitHub&lt;/a&gt; |
&lt;a class="reference external" href="https://gvaliente.github.io/butano/"&gt;Documentation&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="tonclib"&gt;
&lt;h4&gt;Tonclib&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;Tonclib&lt;/strong&gt; is the veteran of GBA development. While less actively
developed, it remains stable and is accompanied by some of the best
documentation in retro game development.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Key Features:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Hardware abstraction layer&lt;/li&gt;
&lt;li&gt;Advanced sprite and background management&lt;/li&gt;
&lt;li&gt;Mode 7 (affine) support for pseudo-3D effects&lt;/li&gt;
&lt;li&gt;Built-in text rendering&lt;/li&gt;
&lt;li&gt;Excellent tutorial and documentation (Tonc)&lt;/li&gt;
&lt;li&gt;Used by many commercial-quality homebrews&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;License:&lt;/strong&gt; MIT-like (custom permissive)&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Links:&lt;/strong&gt; &lt;a class="reference external" href="https://github.com/devkitPro/libtonc"&gt;GitHub&lt;/a&gt; |
&lt;a class="reference external" href="https://www.coranac.com/tonc/text/"&gt;Tonc Tutorial&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="nintendo-ds-nds"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="#toc-entry-5"&gt;Nintendo DS (NDS)&lt;/a&gt;&lt;/h3&gt;
&lt;div class="section" id="nightfox-s-lib"&gt;
&lt;h4&gt;NightFox's Lib&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;NightFox's Lib&lt;/strong&gt; provides a high-level 2D game library built on top
of libnds, making DS development more approachable.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Key Features:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Sprite engine with rotation and scaling&lt;/li&gt;
&lt;li&gt;Tiled background support&lt;/li&gt;
&lt;li&gt;Collision detection&lt;/li&gt;
&lt;li&gt;2D and 3D text rendering&lt;/li&gt;
&lt;li&gt;Sound and MOD music playback&lt;/li&gt;
&lt;li&gt;File system access&lt;/li&gt;
&lt;li&gt;Includes examples and templates&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;License:&lt;/strong&gt; MIT&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Links:&lt;/strong&gt; &lt;a class="reference external" href="https://github.com/knightfox75/nds_nflib"&gt;GitHub&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="libnds-devkitarm"&gt;
&lt;h4&gt;libnds + devkitARM&lt;/h4&gt;
&lt;p&gt;For those wanting full control, &lt;strong&gt;libnds&lt;/strong&gt; is the official devkitPro
library providing low-level access to all DS features.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Key Features:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Complete hardware access to both screens&lt;/li&gt;
&lt;li&gt;2D and 3D graphics support&lt;/li&gt;
&lt;li&gt;Touchscreen and button input&lt;/li&gt;
&lt;li&gt;WiFi networking support&lt;/li&gt;
&lt;li&gt;FAT file system access&lt;/li&gt;
&lt;li&gt;Audio subsystem control&lt;/li&gt;
&lt;li&gt;Most flexible but requires hardware knowledge&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;License:&lt;/strong&gt; zlib License&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Links:&lt;/strong&gt; &lt;a class="reference external" href="https://github.com/devkitPro/libnds"&gt;GitHub&lt;/a&gt; |
&lt;a class="reference external" href="https://libnds.devkitpro.org/"&gt;Documentation&lt;/a&gt; |
&lt;a class="reference external" href="https://github.com/devkitPro/nds-examples"&gt;Examples&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="nintendo-3ds"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="#toc-entry-6"&gt;Nintendo 3DS&lt;/a&gt;&lt;/h3&gt;
&lt;div class="section" id="citro2d-citro3d"&gt;
&lt;h4&gt;citro2d / citro3d&lt;/h4&gt;
&lt;p&gt;The &lt;strong&gt;citro&lt;/strong&gt; libraries are the official devkitPro solution for 3DS
development, providing hardware-accelerated 2D and 3D graphics.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Key Features:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Hardware-accelerated rendering via PICA200 GPU&lt;/li&gt;
&lt;li&gt;2D sprite batching (citro2d)&lt;/li&gt;
&lt;li&gt;Full 3D graphics pipeline (citro3d)&lt;/li&gt;
&lt;li&gt;Shader support&lt;/li&gt;
&lt;li&gt;Stereoscopic 3D rendering&lt;/li&gt;
&lt;li&gt;Text rendering&lt;/li&gt;
&lt;li&gt;Used by most modern 3DS homebrew&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;License:&lt;/strong&gt; zlib License&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Links:&lt;/strong&gt; &lt;a class="reference external" href="https://github.com/devkitPro/citro3d"&gt;citro3d&lt;/a&gt; |
&lt;a class="reference external" href="https://github.com/devkitPro/citro2d"&gt;citro2d&lt;/a&gt; |
&lt;a class="reference external" href="https://github.com/devkitPro/citro3d/wiki"&gt;Documentation&lt;/a&gt; |
&lt;a class="reference external" href="https://github.com/devkitPro/3ds-examples"&gt;Examples&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="super-nintendo-snes"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="#toc-entry-7"&gt;Super Nintendo (SNES)&lt;/a&gt;&lt;/h3&gt;
&lt;div class="section" id="pvsneslib"&gt;
&lt;h4&gt;PVSnesLib&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;PVSnesLib&lt;/strong&gt; is a modern C library bringing contemporary development
practices to the Super Nintendo.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Key Features:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Modern C API&lt;/li&gt;
&lt;li&gt;Sprite management (OAM)&lt;/li&gt;
&lt;li&gt;Background and tilemap support&lt;/li&gt;
&lt;li&gt;Mode 7 support for rotation and scaling&lt;/li&gt;
&lt;li&gt;Sound driver integration&lt;/li&gt;
&lt;li&gt;Gamepad input handling&lt;/li&gt;
&lt;li&gt;DMA and HDMA operations&lt;/li&gt;
&lt;li&gt;Documentation&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;License:&lt;/strong&gt; MIT&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Links:&lt;/strong&gt; &lt;a class="reference external" href="https://github.com/alekmaul/pvsneslib"&gt;GitHub&lt;/a&gt; |
&lt;a class="reference external" href="https://github.com/alekmaul/pvsneslib/wiki"&gt;Wiki&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="libsfx"&gt;
&lt;h4&gt;libSFX&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;libSFX&lt;/strong&gt; is a powerful macro assembler framework for SNES
development, optimized for performance.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Key Features:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Assembly-first with C support&lt;/li&gt;
&lt;li&gt;Highly optimized for speed&lt;/li&gt;
&lt;li&gt;Full hardware access&lt;/li&gt;
&lt;li&gt;Super FX (GSU) support&lt;/li&gt;
&lt;li&gt;Music and sound effects&lt;/li&gt;
&lt;li&gt;Can integrate with C code&lt;/li&gt;
&lt;li&gt;Steeper learning curve but very capable&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;License:&lt;/strong&gt; MIT&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Links:&lt;/strong&gt; &lt;a class="reference external" href="https://github.com/Optiroc/libSFX"&gt;GitHub&lt;/a&gt; |
&lt;a class="reference external" href="https://github.com/Optiroc/libSFX/wiki"&gt;Wiki&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="sega-mega-drive-genesis"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="#toc-entry-8"&gt;Sega Mega Drive / Genesis&lt;/a&gt;&lt;/h3&gt;
&lt;div class="section" id="sgdk-sega-genesis-development-kit"&gt;
&lt;h4&gt;SGDK (Sega Genesis Development Kit)&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;SGDK&lt;/strong&gt; has become the industry standard for Mega Drive homebrew
development, with an incredibly active community and extensive
documentation.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Key Features:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Complete development framework&lt;/li&gt;
&lt;li&gt;Sprite engine with hardware scrolling&lt;/li&gt;
&lt;li&gt;Multiple background plane support&lt;/li&gt;
&lt;li&gt;VDP (video display processor) management&lt;/li&gt;
&lt;li&gt;Z80 sound driver with XGM music format&lt;/li&gt;
&lt;li&gt;DMA operations&lt;/li&gt;
&lt;li&gt;Built-in collision detection&lt;/li&gt;
&lt;li&gt;ResComp resource compiler for assets&lt;/li&gt;
&lt;li&gt;Extensive tutorials and documentation&lt;/li&gt;
&lt;li&gt;Large, active community&lt;/li&gt;
&lt;li&gt;Excellent Linux support&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;License:&lt;/strong&gt; MIT&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Links:&lt;/strong&gt; &lt;a class="reference external" href="https://github.com/Stephane-D/SGDK"&gt;GitHub&lt;/a&gt; |
&lt;a class="reference external" href="https://github.com/Stephane-D/SGDK/wiki"&gt;Wiki&lt;/a&gt; |
&lt;a class="reference external" href="https://segaxtreme.net/forums/sgdk.77/"&gt;Forums&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="neo-geo"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="#toc-entry-9"&gt;Neo Geo&lt;/a&gt;&lt;/h3&gt;
&lt;div class="section" id="ngdk-neo-geo-development-kit"&gt;
&lt;h4&gt;NGDK (Neo Geo Development Kit)&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;NGDK&lt;/strong&gt; brings C development to the Neo Geo arcade platform and AES
home console.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Key Features:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;C framework for Neo Geo development&lt;/li&gt;
&lt;li&gt;Sprite system management&lt;/li&gt;
&lt;li&gt;Background and fix layer handling&lt;/li&gt;
&lt;li&gt;Input handling for arcade controls&lt;/li&gt;
&lt;li&gt;Sound support (Z80 + YM2610)&lt;/li&gt;
&lt;li&gt;Asset conversion tools&lt;/li&gt;
&lt;li&gt;Example games included&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;License:&lt;/strong&gt; Custom permissive&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Links:&lt;/strong&gt; &lt;a class="reference external" href="https://github.com/dciabrin/ngdevkit"&gt;GitHub&lt;/a&gt; |
&lt;a class="reference external" href="https://github.com/dciabrin/ngdevkit/wiki"&gt;Wiki&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="pc-engine-turbografx-16"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="#toc-entry-10"&gt;PC Engine / TurboGrafx-16&lt;/a&gt;&lt;/h3&gt;
&lt;div class="section" id="huc-hudson-c-compiler"&gt;
&lt;h4&gt;HuC (Hudson C Compiler)&lt;/h4&gt;
&lt;p&gt;The classic &lt;strong&gt;HuC&lt;/strong&gt; compiler has been maintained by the community and
remains a solid choice for PC Engine development.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Key Features:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;C compiler for PC Engine&lt;/li&gt;
&lt;li&gt;Support for HuCard and CD-ROMÂ²&lt;/li&gt;
&lt;li&gt;PSG sound support&lt;/li&gt;
&lt;li&gt;Sprite management&lt;/li&gt;
&lt;li&gt;Background and tilemap support&lt;/li&gt;
&lt;li&gt;ADPCM audio for CD games&lt;/li&gt;
&lt;li&gt;Standard C library subset&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;License:&lt;/strong&gt; BSD-like&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Links:&lt;/strong&gt; &lt;a class="reference external" href="https://github.com/uli/huc"&gt;GitHub&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="squirrel-hudk"&gt;
&lt;h4&gt;Squirrel (HuDK)&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;Squirrel&lt;/strong&gt; (HuDK) is a more modern alternative to HuC with improved
optimization.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Key Features:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Modern PC Engine framework&lt;/li&gt;
&lt;li&gt;Better optimization than classic HuC&lt;/li&gt;
&lt;li&gt;CD-ROM support&lt;/li&gt;
&lt;li&gt;Active development&lt;/li&gt;
&lt;li&gt;Growing community&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;License:&lt;/strong&gt; Open source&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Links:&lt;/strong&gt; &lt;a class="reference external" href="https://github.com/BlockoS/HuDK"&gt;GitHub&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="fifth-and-sixth-generation-consoles"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="#toc-entry-11"&gt;Fifth and Sixth Generation Consoles&lt;/a&gt;&lt;/h2&gt;
&lt;div class="section" id="sony-playstation-1-ps1"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="#toc-entry-12"&gt;Sony PlayStation 1 (PS1)&lt;/a&gt;&lt;/h3&gt;
&lt;div class="section" id="psn00bsdk"&gt;
&lt;h4&gt;PSn00bSDK&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;PSn00bSDK&lt;/strong&gt; is a modern, lightweight SDK that makes PS1 development
accessible and enjoyable. It's cleaner and more approachable than the
old Psy-Q SDK.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Key Features:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Modern, clean API design&lt;/li&gt;
&lt;li&gt;Hardware 3D graphics (GTE) support&lt;/li&gt;
&lt;li&gt;2D sprite and primitive rendering&lt;/li&gt;
&lt;li&gt;CD-ROM file system access&lt;/li&gt;
&lt;li&gt;SPU sound support with ADPCM and XA audio&lt;/li&gt;
&lt;li&gt;Memory card management&lt;/li&gt;
&lt;li&gt;Controller input (standard and analog)&lt;/li&gt;
&lt;li&gt;Serial I/O support&lt;/li&gt;
&lt;li&gt;Examples&lt;/li&gt;
&lt;li&gt;Excellent Linux support&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;License:&lt;/strong&gt; MPL 2.0&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Links:&lt;/strong&gt; &lt;a class="reference external" href="https://github.com/Lameguy64/PSn00bSDK"&gt;GitHub&lt;/a&gt; |
&lt;a class="reference external" href="https://github.com/Lameguy64/PSn00bSDK/wiki"&gt;Wiki&lt;/a&gt; |
&lt;a class="reference external" href="https://github.com/Lameguy64/PSn00bSDK/tree/master/examples"&gt;Examples&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="sega-saturn"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="#toc-entry-13"&gt;Sega Saturn&lt;/a&gt;&lt;/h3&gt;
&lt;div class="section" id="jo-engine"&gt;
&lt;h4&gt;Jo Engine&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;Jo Engine&lt;/strong&gt; is a high-level 2D and 3D game engine that makes Saturn
development approachable.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Key Features:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;High-level API for 2D and 3D&lt;/li&gt;
&lt;li&gt;Sprite engine with scaling and rotation&lt;/li&gt;
&lt;li&gt;3D model support with converter tools&lt;/li&gt;
&lt;li&gt;Audio support (PCM, CD audio)&lt;/li&gt;
&lt;li&gt;Save game management&lt;/li&gt;
&lt;li&gt;Collision detection&lt;/li&gt;
&lt;li&gt;Map and tilemap support&lt;/li&gt;
&lt;li&gt;USB dev cart support for rapid testing&lt;/li&gt;
&lt;li&gt;Video tutorials available&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;License:&lt;/strong&gt; MIT&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Links:&lt;/strong&gt; &lt;a class="reference external" href="https://github.com/johannes-fetz/joengine"&gt;GitHub&lt;/a&gt; |
&lt;a class="reference external" href="https://jo-engine.org/"&gt;Website&lt;/a&gt; |
&lt;a class="reference external" href="https://github.com/johannes-fetz/joengine/wiki"&gt;Wiki&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="yaul"&gt;
&lt;h4&gt;Yaul&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;Yaul&lt;/strong&gt; is a modern alternative to the old Sega Basic Library,
offering a clean API for advanced Saturn developers.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Key Features:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Modern library design&lt;/li&gt;
&lt;li&gt;Clean API&lt;/li&gt;
&lt;li&gt;VDP1 and VDP2 support&lt;/li&gt;
&lt;li&gt;SCU DMA operations&lt;/li&gt;
&lt;li&gt;CD block support&lt;/li&gt;
&lt;li&gt;SCSP (sound) support&lt;/li&gt;
&lt;li&gt;USB dev cart support&lt;/li&gt;
&lt;li&gt;Excellent documentation&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;License:&lt;/strong&gt; BSD&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Links:&lt;/strong&gt; &lt;a class="reference external" href="https://github.com/ijacquez/libyaul"&gt;GitHub&lt;/a&gt; |
&lt;a class="reference external" href="https://ijacquez.github.io/libyaul/"&gt;Documentation&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="nintendo-64"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="#toc-entry-14"&gt;Nintendo 64&lt;/a&gt;&lt;/h3&gt;
&lt;div class="section" id="libdragon"&gt;
&lt;h4&gt;libdragon&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;libdragon&lt;/strong&gt; has revolutionized N64 development by making it far more
accessible than the old Nintendo SDK.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Key Features:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Modern N64 development library&lt;/li&gt;
&lt;li&gt;3D graphics via RDP/RSP&lt;/li&gt;
&lt;li&gt;Audio subsystem support&lt;/li&gt;
&lt;li&gt;Controller input&lt;/li&gt;
&lt;li&gt;ROM file system&lt;/li&gt;
&lt;li&gt;Hardware sprites&lt;/li&gt;
&lt;li&gt;Much easier than old SDKs&lt;/li&gt;
&lt;li&gt;Very active community&lt;/li&gt;
&lt;li&gt;Good documentation&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;License:&lt;/strong&gt; Unlicense (public domain)&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Links:&lt;/strong&gt; &lt;a class="reference external" href="https://github.com/DragonMinded/libdragon"&gt;GitHub&lt;/a&gt; |
&lt;a class="reference external" href="https://dragonminded.github.io/libdragon/"&gt;Documentation&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="sega-dreamcast"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="#toc-entry-15"&gt;Sega Dreamcast&lt;/a&gt;&lt;/h3&gt;
&lt;div class="section" id="kallistios-kos"&gt;
&lt;h4&gt;KallistiOS (KOS)&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;KallistiOS&lt;/strong&gt; is the de facto standard for Dreamcast homebrew, with an
incredibly mature ecosystem.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Key Features:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Complete OS-like framework&lt;/li&gt;
&lt;li&gt;2D and 3D graphics (PowerVR)&lt;/li&gt;
&lt;li&gt;Network support (modem, broadband adapter)&lt;/li&gt;
&lt;li&gt;VMU (Visual Memory Unit) support&lt;/li&gt;
&lt;li&gt;Input device support&lt;/li&gt;
&lt;li&gt;CD-ROM file system (ISO9660)&lt;/li&gt;
&lt;li&gt;AICA SPU audio support&lt;/li&gt;
&lt;li&gt;Threading and multitasking&lt;/li&gt;
&lt;li&gt;USB development support&lt;/li&gt;
&lt;li&gt;Extensive library ecosystem&lt;/li&gt;
&lt;li&gt;Very mature and well-documented&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;License:&lt;/strong&gt; BSD-style&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Links:&lt;/strong&gt; &lt;a class="reference external" href="https://github.com/KallistiOS/KallistiOS"&gt;GitHub&lt;/a&gt; |
&lt;a class="reference external" href="https://kos-docs.dreamcast.wiki/"&gt;Documentation&lt;/a&gt; |
&lt;a class="reference external" href="https://dcemulation.org/phpBB/"&gt;Forums&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Additional KOS libraries include GLdc (OpenGL-like API) and SDL ports,
making cross-platform development easier.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="sony-playstation-2-ps2"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="#toc-entry-16"&gt;Sony PlayStation 2 (PS2)&lt;/a&gt;&lt;/h3&gt;
&lt;div class="section" id="ps2sdk"&gt;
&lt;h4&gt;PS2SDK&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;PS2SDK&lt;/strong&gt; provides complete access to the powerful PlayStation 2
hardware.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Key Features:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Complete PS2 development SDK&lt;/li&gt;
&lt;li&gt;Graphics Synthesizer (GS) support for 2D/3D&lt;/li&gt;
&lt;li&gt;Emotion Engine and I/O Processor access&lt;/li&gt;
&lt;li&gt;Vector Unit (VU) programming&lt;/li&gt;
&lt;li&gt;Sound library (audsrv)&lt;/li&gt;
&lt;li&gt;USB and network support&lt;/li&gt;
&lt;li&gt;Memory card management&lt;/li&gt;
&lt;li&gt;DVD file system access&lt;/li&gt;
&lt;li&gt;Excellent Linux compatibility&lt;/li&gt;
&lt;li&gt;Large, active community&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;License:&lt;/strong&gt; BSD/Academic Free License&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Links:&lt;/strong&gt; &lt;a class="reference external" href="https://github.com/ps2dev/ps2sdk"&gt;GitHub&lt;/a&gt; |
&lt;a class="reference external" href="https://ps2dev.github.io/"&gt;Website&lt;/a&gt; |
&lt;a class="reference external" href="https://github.com/ps2dev/ps2sdk/tree/master/samples"&gt;Examples&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="nintendo-gamecube-wii"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="#toc-entry-17"&gt;Nintendo GameCube / Wii&lt;/a&gt;&lt;/h3&gt;
&lt;div class="section" id="devkitppc-libogc"&gt;
&lt;h4&gt;devkitPPC + libogc&lt;/h4&gt;
&lt;p&gt;The official &lt;strong&gt;devkitPro&lt;/strong&gt; toolchain for GameCube and Wii provides
hardware access.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Key Features:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Official devkitPro toolchain&lt;/li&gt;
&lt;li&gt;Full hardware access for both systems&lt;/li&gt;
&lt;li&gt;GX 3D graphics library&lt;/li&gt;
&lt;li&gt;ASND audio library&lt;/li&gt;
&lt;li&gt;Controller support (PAD/WPAD)&lt;/li&gt;
&lt;li&gt;Network library&lt;/li&gt;
&lt;li&gt;USB and SD card storage&lt;/li&gt;
&lt;li&gt;DVD reading&lt;/li&gt;
&lt;li&gt;Homebrew Channel integration (Wii)&lt;/li&gt;
&lt;li&gt;Large community&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;License:&lt;/strong&gt; Various (permissive)&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Links:&lt;/strong&gt; &lt;a class="reference external" href="https://github.com/devkitPro/libogc"&gt;GitHub&lt;/a&gt; |
&lt;a class="reference external" href="https://libogc.devkitpro.org/"&gt;Documentation&lt;/a&gt; |
&lt;a class="reference external" href="https://github.com/devkitPro/gamecube-examples"&gt;Examples&lt;/a&gt; |
&lt;a class="reference external" href="https://devkitpro.org/"&gt;devkitPro&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="sony-playstation-portable-psp"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="#toc-entry-18"&gt;Sony PlayStation Portable (PSP)&lt;/a&gt;&lt;/h3&gt;
&lt;div class="section" id="pspsdk"&gt;
&lt;h4&gt;PSPSDK&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;PSPSDK&lt;/strong&gt; is the complete homebrew SDK for PSP development.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Key Features:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Complete PSP SDK&lt;/li&gt;
&lt;li&gt;3D graphics (GU library) with hardware acceleration&lt;/li&gt;
&lt;li&gt;2D sprite rendering&lt;/li&gt;
&lt;li&gt;Multi-format audio support&lt;/li&gt;
&lt;li&gt;WiFi and networking&lt;/li&gt;
&lt;li&gt;USB support&lt;/li&gt;
&lt;li&gt;Memory Stick access&lt;/li&gt;
&lt;li&gt;Save data management&lt;/li&gt;
&lt;li&gt;MP3, AAC playback&lt;/li&gt;
&lt;li&gt;Mature and stable&lt;/li&gt;
&lt;li&gt;Great Linux support&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;License:&lt;/strong&gt; BSD/GPL&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Links:&lt;/strong&gt; &lt;a class="reference external" href="https://github.com/pspdev/pspsdk"&gt;GitHub&lt;/a&gt; |
&lt;a class="reference external" href="https://forums.ps2dev.org/"&gt;Forums&lt;/a&gt; |
&lt;a class="reference external" href="https://github.com/pspdev/psp-packages"&gt;Examples&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="playstation-vita"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="#toc-entry-19"&gt;PlayStation Vita&lt;/a&gt;&lt;/h3&gt;
&lt;div class="section" id="vita-sdk"&gt;
&lt;h4&gt;Vita SDK&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;Vita SDK&lt;/strong&gt; provides a complete homebrew development solution for
Sony's handheld.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Key Features:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Complete PS Vita SDK&lt;/li&gt;
&lt;li&gt;OpenGL ES-like graphics&lt;/li&gt;
&lt;li&gt;Touch screen support&lt;/li&gt;
&lt;li&gt;Accelerometer and gyroscope&lt;/li&gt;
&lt;li&gt;Camera support&lt;/li&gt;
&lt;li&gt;Network and WiFi&lt;/li&gt;
&lt;li&gt;Trophy system support&lt;/li&gt;
&lt;li&gt;Save data management&lt;/li&gt;
&lt;li&gt;Multi-format audio&lt;/li&gt;
&lt;li&gt;Very active homebrew scene&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;License:&lt;/strong&gt; Various&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Links:&lt;/strong&gt; &lt;a class="reference external" href="https://github.com/vitasdk/vita-headers"&gt;GitHub&lt;/a&gt; |
&lt;a class="reference external" href="https://vitasdk.org/"&gt;Website&lt;/a&gt; |
&lt;a class="reference external" href="https://docs.vitasdk.org/"&gt;Documentation&lt;/a&gt; |
&lt;a class="reference external" href="https://github.com/vitasdk/samples"&gt;Examples&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="xbox-original"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="#toc-entry-20"&gt;Xbox (Original)&lt;/a&gt;&lt;/h3&gt;
&lt;div class="section" id="nxdk"&gt;
&lt;h4&gt;nxdk&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;nxdk&lt;/strong&gt; is a clean-room open-source Xbox SDK with no Microsoft code.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Key Features:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Open-source Xbox SDK&lt;/li&gt;
&lt;li&gt;Direct3D 8-like graphics API&lt;/li&gt;
&lt;li&gt;Audio support&lt;/li&gt;
&lt;li&gt;Controller input&lt;/li&gt;
&lt;li&gt;Network support&lt;/li&gt;
&lt;li&gt;Hard drive access&lt;/li&gt;
&lt;li&gt;SDL port available&lt;/li&gt;
&lt;li&gt;Growing community&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;License:&lt;/strong&gt; Various (LGPL/MIT)&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Links:&lt;/strong&gt; &lt;a class="reference external" href="https://github.com/XboxDev/nxdk"&gt;GitHub&lt;/a&gt; |
&lt;a class="reference external" href="https://github.com/XboxDev/nxdk/wiki"&gt;Wiki&lt;/a&gt; |
&lt;a class="reference external" href="https://github.com/XboxDev/nxdk/tree/master/samples"&gt;Examples&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="development-tools-and-workflow"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="#toc-entry-21"&gt;Development Tools and Workflow&lt;/a&gt;&lt;/h2&gt;
&lt;div class="section" id="devkitpro-toolchain"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="#toc-entry-22"&gt;DevkitPro Toolchain&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;Many frameworks (GBA, DS, 3DS, GameCube/Wii) require the &lt;strong&gt;devkitPro&lt;/strong&gt;
toolchain, which works excellently on Linux:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="https://devkitpro.org/"&gt;Website&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://devkitpro.org/wiki/Getting_Started"&gt;Getting Started Guide&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Includes devkitARM, devkitPPC, and associated libraries&lt;/li&gt;
&lt;li&gt;Available via pacman (devkitPro package manager) on Fedora&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="graphics-tools"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="#toc-entry-23"&gt;Graphics Tools&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;For a fully open-source workflow, these tools are all free, open-source,
and Linux-native:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Pixel Art Editors:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;strong&gt;Pixelorama&lt;/strong&gt; (MIT): Modern pixel art editor with animation support,
built with Godot. Excellent Aseprite alternative.
&lt;a class="reference external" href="https://pixelorama.org/"&gt;Website&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;LibreSprite&lt;/strong&gt; (GPL v2): Fork of old GPL Aseprite with familiar
interface. &lt;a class="reference external" href="https://libresprite.github.io/"&gt;Website&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;GrafX2&lt;/strong&gt; (GPL v2): Inspired by Deluxe Paint, excellent for retro
graphics. &lt;a class="reference external" href="http://grafx2.chez.com/"&gt;Website&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Piskel&lt;/strong&gt; (Apache 2.0): Web-based and offline pixel art editor.
&lt;a class="reference external" href="https://www.piskelapp.com/"&gt;Website&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Tilemap Editor:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;strong&gt;Tiled&lt;/strong&gt; (GPL v2/BSD): Industry-standard tilemap editor.
&lt;a class="reference external" href="https://www.mapeditor.org/"&gt;Website&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;General Graphics:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;strong&gt;GIMP&lt;/strong&gt; (GPL v3+): Full-featured image editor.
&lt;a class="reference external" href="https://www.gimp.org/"&gt;Website&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="music-and-sound-tools"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="#toc-entry-24"&gt;Music and Sound Tools&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;All tools below are free, open-source, and Linux-native:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Chiptune (Hardware Chip Emulation):&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;strong&gt;Furnace&lt;/strong&gt; (GPL v2+): Multi-system chiptune tracker supporting 60+
sound chips (NES, SNES, Genesis, Game Boy, etc.). Perfect for
authentic retro console music. Available on Flathub.
&lt;a class="reference external" href="https://github.com/tildearrow/furnace"&gt;GitHub&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Module Trackers (Sample-based):&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;strong&gt;MilkyTracker&lt;/strong&gt; (GPL v3): FastTracker II-inspired tracker for
MOD/XM formats. &lt;a class="reference external" href="https://milkytracker.org/"&gt;Website&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Schism Tracker&lt;/strong&gt; (GPL v2): Impulse Tracker clone for S3M/IT
formats. &lt;a class="reference external" href="http://schismtracker.org/"&gt;Website&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;NES/Famicom Specific:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;strong&gt;FamiStudio&lt;/strong&gt; (MIT): DAW-style NES/Famicom music editor with
expansion chip support. Available on Flathub.
&lt;a class="reference external" href="https://famistudio.org/"&gt;Website&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Audio Editor:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;strong&gt;Audacity&lt;/strong&gt; (GPL v2/v3): Multi-track audio editor and recorder.
&lt;a class="reference external" href="https://www.audacityteam.org/"&gt;Website&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="emulators-for-testing"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="#toc-entry-25"&gt;Emulators for Testing&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;All emulators below are open-source and Linux-compatible:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;strong&gt;mGBA&lt;/strong&gt;: Game Boy Advance - &lt;a class="reference external" href="https://mgba.io/"&gt;Website&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;DeSmuME&lt;/strong&gt;: Nintendo DS - &lt;a class="reference external" href="https://desmume.org/"&gt;Website&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Citra&lt;/strong&gt;: Nintendo 3DS - &lt;a class="reference external" href="https://citra-emu.org/"&gt;Website&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;bsnes&lt;/strong&gt;: Super Nintendo -
&lt;a class="reference external" href="https://github.com/bsnes-emu/bsnes"&gt;GitHub&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Genesis Plus GX&lt;/strong&gt;: Sega Mega Drive -
&lt;a class="reference external" href="https://github.com/ekeeke/Genesis-Plus-GX"&gt;GitHub&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Mednafen&lt;/strong&gt;: Multi-system (PC Engine, PS1, Saturn, etc.) -
&lt;a class="reference external" href="https://mednafen.github.io/"&gt;Website&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;DuckStation&lt;/strong&gt;: PlayStation 1 -
&lt;a class="reference external" href="https://github.com/stenzek/duckstation"&gt;GitHub&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;PCSX2&lt;/strong&gt;: PlayStation 2 - &lt;a class="reference external" href="https://pcsx2.net/"&gt;Website&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Dolphin&lt;/strong&gt;: GameCube/Wii - &lt;a class="reference external" href="https://dolphin-emu.org/"&gt;Website&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;PPSSPP&lt;/strong&gt;: PlayStation Portable - &lt;a class="reference external" href="https://www.ppsspp.org/"&gt;Website&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Vita3K&lt;/strong&gt;: PlayStation Vita - &lt;a class="reference external" href="https://vita3k.org/"&gt;Website&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Flycast&lt;/strong&gt;: Sega Dreamcast -
&lt;a class="reference external" href="https://github.com/flyinghead/flycast"&gt;GitHub&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Mupen64Plus&lt;/strong&gt;: Nintendo 64 -
&lt;a class="reference external" href="https://www.mupen64plus.org/"&gt;Website&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;xemu&lt;/strong&gt;: Original Xbox - &lt;a class="reference external" href="https://xemu.app/"&gt;Website&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="recommendations-by-experience-level"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="#toc-entry-26"&gt;Recommendations by Experience Level&lt;/a&gt;&lt;/h2&gt;
&lt;div class="section" id="beginner-friendly"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="#toc-entry-27"&gt;Beginner-Friendly&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;8-bit/16-bit:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;strong&gt;GB Studio&lt;/strong&gt; (GBC): Visual editor, no coding required&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;GBDK-2020&lt;/strong&gt; (GBC): Simple C development&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;SGDK&lt;/strong&gt; (Mega Drive): Excellent documentation and community&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Fifth/Sixth Generation:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;strong&gt;PSn00bSDK&lt;/strong&gt; (PS1): Clean, modern API&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Jo Engine&lt;/strong&gt; (Saturn): High-level engine with tutorials&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;PSPSDK&lt;/strong&gt; (PSP): Well-documented and stable&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="intermediate"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="#toc-entry-28"&gt;Intermediate&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;8-bit/16-bit:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;strong&gt;Butano&lt;/strong&gt; (GBA): Modern C++ with great docs&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;PVSnesLib&lt;/strong&gt; (SNES): Comprehensive library&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;NightFox's Lib&lt;/strong&gt; (DS): High-level 2D development&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Fifth/Sixth Generation:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;strong&gt;KallistiOS&lt;/strong&gt; (Dreamcast): Mature ecosystem&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;devkitPPC&lt;/strong&gt; (GC/Wii): Official toolchain&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Vita SDK&lt;/strong&gt; (Vita): Active community&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="advanced"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="#toc-entry-29"&gt;Advanced&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;8-bit/16-bit:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;strong&gt;libSFX&lt;/strong&gt; (SNES): Assembly-first, highly optimized&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;citro3d&lt;/strong&gt; (3DS): Direct hardware access&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;libnds&lt;/strong&gt; (DS): Low-level control&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Fifth/Sixth Generation:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;strong&gt;PS2SDK&lt;/strong&gt; (PS2): Complex but powerful&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Yaul&lt;/strong&gt; (Saturn): Modern low-level library&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;libdragon&lt;/strong&gt; (N64): RDP/RSP programming&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;nxdk&lt;/strong&gt; (Xbox): Direct3D 8 development&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="community-resources"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="#toc-entry-30"&gt;Community Resources&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;General Communities:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;strong&gt;NESDev Forums&lt;/strong&gt;: Multi-platform retro development -
&lt;a class="reference external" href="https://forums.nesdev.org/"&gt;Forums&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;GBAtemp&lt;/strong&gt;: DS/3DS homebrew - &lt;a class="reference external" href="https://gbatemp.net/"&gt;Website&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;devkitPro Discord&lt;/strong&gt;: Nintendo handheld development&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Platform-Specific:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;strong&gt;GBADev&lt;/strong&gt;: Game Boy Advance - &lt;a class="reference external" href="https://gbadev.net/"&gt;Website&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;PSXDev&lt;/strong&gt;: PlayStation 1 - &lt;a class="reference external" href="https://www.psxdev.net/"&gt;Website&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;PS2Dev Forums&lt;/strong&gt;: PS2, PSP - &lt;a class="reference external" href="https://forums.ps2dev.org/"&gt;Forums&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;DCEmulation&lt;/strong&gt;: Dreamcast - &lt;a class="reference external" href="https://dcemulation.org/"&gt;Website&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;SegaXtreme&lt;/strong&gt;: Saturn, Mega Drive -
&lt;a class="reference external" href="https://segaxtreme.net/"&gt;Website&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;N64brew&lt;/strong&gt;: Nintendo 64 - &lt;a class="reference external" href="https://n64brew.dev/"&gt;Website&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;GC-Forever&lt;/strong&gt;: GameCube/Wii - &lt;a class="reference external" href="https://www.gc-forever.com/"&gt;Website&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;r/vitahacks&lt;/strong&gt;: PS Vita homebrew&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="conclusion"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="#toc-entry-31"&gt;Conclusion&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;The retro console homebrew scene has never been more vibrant or accessible.
With modern open-source toolchains, documentation, and active communities,
developing games for classic consoles is now within reach of any motivated
developer with a Linux machine.&lt;/p&gt;
&lt;p&gt;Whether you want to create a simple Game Boy puzzle game with GB Studio's
visual editor, or push the limits of the PlayStation 2's Emotion Engine with
assembly-optimized code, the tools are available and the communities are
welcoming.&lt;/p&gt;
&lt;p&gt;The best part? This entire workflow can be accomplished with 100% free and
open-source software, from the development tools to the graphics editors to the
music trackers. This guide should give you everything you need to start your
retro game development journey.&lt;/p&gt;
&lt;p&gt;Happy coding, and may your sprites never flicker!&lt;/p&gt;
&lt;/div&gt;
</content><category term="gamedev"/><category term="gamedev"/><category term="retro"/><category term="homebrew"/><category term="console"/><category term="open-source"/></entry><entry><title>Retro Console Hardware Comparison: A Technical Deep Dive</title><link href="https://tprrt.tupi.fr/retro-console-hardware-comparison.html" rel="alternate"/><published>2025-03-11T10:00:00+01:00</published><updated>2025-03-11T10:00:00+01:00</updated><author><name>tperrot</name></author><id>tag:tprrt.tupi.fr,2025-03-11:/retro-console-hardware-comparison.html</id><summary type="html">&lt;p class="first last"&gt;A technical comparison of classic gaming consoles, covering CPU
specifications, graphics capabilities, audio systems, and special features
across multiple generations of hardware.&lt;/p&gt;
</summary><content type="html">&lt;div class="section" id="introduction"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="#toc-entry-1"&gt;Introduction&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Understanding the hardware capabilities of classic gaming consoles
provides valuable insight for both homebrew developers and retro gaming
enthusiasts. Each console generation brought significant improvements in
processing power, graphics capabilities, and audio quality, while
working within tight memory constraints and power budgets.&lt;/p&gt;
&lt;p&gt;This guide provides detailed technical comparisons across multiple
console generations, from the 8-bit Game Boy to modern hybrid systems
like the Nintendo Switch. Whether you're developing homebrew games or
simply curious about the technical evolution of gaming hardware, these
tables offer a reference.&lt;/p&gt;
&lt;div class="contents topic" id="table-of-contents"&gt;
&lt;p class="topic-title"&gt;&lt;a class="reference internal" href="#top"&gt;Table of Contents&lt;/a&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference internal" href="#introduction" id="toc-entry-1"&gt;Introduction&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="#cpu-and-memory-architecture" id="toc-entry-2"&gt;CPU and Memory Architecture&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class="reference internal" href="#processor-specifications" id="toc-entry-3"&gt;Processor Specifications&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="#memory-configurations" id="toc-entry-4"&gt;Memory Configurations&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="#d-graphics-capabilities" id="toc-entry-5"&gt;2D Graphics Capabilities&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class="reference internal" href="#color-depth-and-palette" id="toc-entry-6"&gt;Color Depth and Palette&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="#sprite-capabilities" id="toc-entry-7"&gt;Sprite Capabilities&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="#video-output-specifications" id="toc-entry-8"&gt;Video Output Specifications&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class="reference internal" href="#display-characteristics" id="toc-entry-9"&gt;Display Characteristics&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="#audio-capabilities" id="toc-entry-10"&gt;Audio Capabilities&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class="reference internal" href="#sound-architecture" id="toc-entry-11"&gt;Sound Architecture&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="#audio-output" id="toc-entry-12"&gt;Audio Output&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="#special-graphics-features" id="toc-entry-13"&gt;Special Graphics Features&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class="reference internal" href="#hardware-effects-by-console" id="toc-entry-14"&gt;Hardware Effects by Console&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a class="reference internal" href="#conclusion" id="toc-entry-15"&gt;Conclusion&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="cpu-and-memory-architecture"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="#toc-entry-2"&gt;CPU and Memory Architecture&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;The processors and memory configurations of gaming consoles reveal much
about their capabilities and limitations. Early consoles operated with
kilobytes of RAM, while modern systems have gigabytes at their disposal.&lt;/p&gt;
&lt;div class="section" id="processor-specifications"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="#toc-entry-3"&gt;Processor Specifications&lt;/a&gt;&lt;/h3&gt;
&lt;table border="1" class="docutils"&gt;
&lt;colgroup&gt;
&lt;col width="28%" /&gt;
&lt;col width="52%" /&gt;
&lt;col width="20%" /&gt;
&lt;/colgroup&gt;
&lt;thead valign="bottom"&gt;
&lt;tr&gt;&lt;th class="head"&gt;Console&lt;/th&gt;
&lt;th class="head"&gt;CPU&lt;/th&gt;
&lt;th class="head"&gt;Clock
Speed&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td&gt;Game Boy&lt;/td&gt;
&lt;td&gt;Custom Sharp LR35902&lt;/td&gt;
&lt;td&gt;4.19 MHz&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Game Boy Color&lt;/td&gt;
&lt;td&gt;Custom Sharp Z80&lt;/td&gt;
&lt;td&gt;8 MHz&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;NES&lt;/td&gt;
&lt;td&gt;Ricoh 2A03 (MOS 6502)&lt;/td&gt;
&lt;td&gt;1.79 MHz
(NTSC) /
1.66 MHz
(PAL)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;SNES&lt;/td&gt;
&lt;td&gt;Ricoh 5A22 (65C816-based)&lt;/td&gt;
&lt;td&gt;3.58 MHz
(max)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;PC Engine&lt;/td&gt;
&lt;td&gt;HuC6280 (MOS 6502-based)&lt;/td&gt;
&lt;td&gt;7.16 MHz&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Neo Geo&lt;/td&gt;
&lt;td&gt;Motorola 68000 + Zilog Z80&lt;/td&gt;
&lt;td&gt;12 MHz +
4 MHz&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Game Boy Adv.&lt;/td&gt;
&lt;td&gt;ARM7TDMI&lt;/td&gt;
&lt;td&gt;16.78 MHz&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Nintendo DS&lt;/td&gt;
&lt;td&gt;ARM946E-S + ARM7&lt;/td&gt;
&lt;td&gt;67 MHz +
33 MHz&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Nintendo 3DS&lt;/td&gt;
&lt;td&gt;Dual-Core ARM11 MPCore&lt;/td&gt;
&lt;td&gt;268 MHz&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Wii&lt;/td&gt;
&lt;td&gt;IBM PowerPC &amp;quot;Broadway&amp;quot;&lt;/td&gt;
&lt;td&gt;729 MHz&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;PSP&lt;/td&gt;
&lt;td&gt;MIPS R4000-based CPU&lt;/td&gt;
&lt;td&gt;333 MHz&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Switch&lt;/td&gt;
&lt;td&gt;NVIDIA Tegra X1
(ARM Cortex-A57)&lt;/td&gt;
&lt;td&gt;1.02 GHz&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;div class="section" id="memory-configurations"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="#toc-entry-4"&gt;Memory Configurations&lt;/a&gt;&lt;/h3&gt;
&lt;table border="1" class="docutils"&gt;
&lt;colgroup&gt;
&lt;col width="29%" /&gt;
&lt;col width="71%" /&gt;
&lt;/colgroup&gt;
&lt;thead valign="bottom"&gt;
&lt;tr&gt;&lt;th class="head"&gt;Console&lt;/th&gt;
&lt;th class="head"&gt;RAM&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td&gt;Game Boy&lt;/td&gt;
&lt;td&gt;8 KB&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Game Boy Color&lt;/td&gt;
&lt;td&gt;32 KB + 16 KB VRAM&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;NES&lt;/td&gt;
&lt;td&gt;2 KB + 2 KB VRAM&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;SNES&lt;/td&gt;
&lt;td&gt;128 KB + 64 KB VRAM&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;PC Engine&lt;/td&gt;
&lt;td&gt;8 KB + 64 KB VRAM&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Neo Geo&lt;/td&gt;
&lt;td&gt;64 KB + 68 KB VRAM&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Game Boy Adv.&lt;/td&gt;
&lt;td&gt;256 KB + 96 KB VRAM&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Nintendo DS&lt;/td&gt;
&lt;td&gt;4 MB + 656 KB VRAM&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Nintendo 3DS&lt;/td&gt;
&lt;td&gt;128 MB + 6 MB VRAM&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Wii&lt;/td&gt;
&lt;td&gt;88 MB (24 MB + 64 MB GDDR3)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;PSP&lt;/td&gt;
&lt;td&gt;32 MB (PSP-1000) / 64 MB (PSP-2000+)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Switch&lt;/td&gt;
&lt;td&gt;4 GB LPDDR4&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;Key Observations:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;The evolution from kilobytes to gigabytes of RAM represents a
million-fold increase in memory capacity. The NES operated with just
2 KB of main RAM, requiring extremely efficient programming. Modern
consoles like the Switch have 4 GB, enabling complex 3D worlds and
high-resolution textures.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="d-graphics-capabilities"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="#toc-entry-5"&gt;2D Graphics Capabilities&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Early gaming consoles were built around dedicated 2D graphics hardware
with hardware sprites and tile-based rendering systems.&lt;/p&gt;
&lt;div class="section" id="color-depth-and-palette"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="#toc-entry-6"&gt;Color Depth and Palette&lt;/a&gt;&lt;/h3&gt;
&lt;table border="1" class="docutils"&gt;
&lt;colgroup&gt;
&lt;col width="28%" /&gt;
&lt;col width="42%" /&gt;
&lt;col width="31%" /&gt;
&lt;/colgroup&gt;
&lt;thead valign="bottom"&gt;
&lt;tr&gt;&lt;th class="head"&gt;Console&lt;/th&gt;
&lt;th class="head"&gt;Graphics Processor&lt;/th&gt;
&lt;th class="head"&gt;Displayable Colors&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td&gt;Game Boy&lt;/td&gt;
&lt;td&gt;Custom Sharp LR35902&lt;/td&gt;
&lt;td&gt;4 shades of gray&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Game Boy Color&lt;/td&gt;
&lt;td&gt;Custom Sharp Z80&lt;/td&gt;
&lt;td&gt;32,768, 56 max&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;NES&lt;/td&gt;
&lt;td&gt;PPU (2C02 or 2C03)&lt;/td&gt;
&lt;td&gt;52, 25 max&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;SNES&lt;/td&gt;
&lt;td&gt;S-PPU&lt;/td&gt;
&lt;td&gt;32,768, 256 max&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;PC Engine&lt;/td&gt;
&lt;td&gt;HuC6270A VDC&lt;/td&gt;
&lt;td&gt;512, 482 max&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Neo Geo&lt;/td&gt;
&lt;td&gt;Custom LSPC2-A2&lt;/td&gt;
&lt;td&gt;65,536, 4,096 max&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Game Boy Adv.&lt;/td&gt;
&lt;td&gt;Custom 2D Core&lt;/td&gt;
&lt;td&gt;32,768, 512 max&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Nintendo DS&lt;/td&gt;
&lt;td&gt;2D/3D Graphics Engine&lt;/td&gt;
&lt;td&gt;32,768, 4,096 max&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Nintendo 3DS&lt;/td&gt;
&lt;td&gt;PICA200 GPU&lt;/td&gt;
&lt;td&gt;16.8 million&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Wii&lt;/td&gt;
&lt;td&gt;ATI Hollywood GPU&lt;/td&gt;
&lt;td&gt;16.8 million&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;PSP&lt;/td&gt;
&lt;td&gt;Sony CXD2962GG + Media&lt;/td&gt;
&lt;td&gt;16.8 million&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Switch&lt;/td&gt;
&lt;td&gt;NVIDIA Tegra X1&lt;/td&gt;
&lt;td&gt;16.8 million&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;div class="section" id="sprite-capabilities"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="#toc-entry-7"&gt;Sprite Capabilities&lt;/a&gt;&lt;/h3&gt;
&lt;table border="1" class="docutils"&gt;
&lt;colgroup&gt;
&lt;col width="27%" /&gt;
&lt;col width="31%" /&gt;
&lt;col width="42%" /&gt;
&lt;/colgroup&gt;
&lt;thead valign="bottom"&gt;
&lt;tr&gt;&lt;th class="head"&gt;Console&lt;/th&gt;
&lt;th class="head"&gt;Sprite Size&lt;/th&gt;
&lt;th class="head"&gt;Max Sprites on Screen&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td&gt;Game Boy&lt;/td&gt;
&lt;td&gt;8x8 or 8x16 px&lt;/td&gt;
&lt;td&gt;40 sprites, max 10 per
line&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Game Boy Color&lt;/td&gt;
&lt;td&gt;8x8 or 8x16 px&lt;/td&gt;
&lt;td&gt;40 sprites, max 10 per
line&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;NES&lt;/td&gt;
&lt;td&gt;8x8 or 8x16 px&lt;/td&gt;
&lt;td&gt;64 sprites, max 8 per line&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;SNES&lt;/td&gt;
&lt;td&gt;Up to 64x64 px&lt;/td&gt;
&lt;td&gt;128 sprites, max 32 per
line&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;PC Engine&lt;/td&gt;
&lt;td&gt;16x16 px&lt;/td&gt;
&lt;td&gt;64 sprites, max 16 per
line&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Neo Geo&lt;/td&gt;
&lt;td&gt;Up to 16x512 px&lt;/td&gt;
&lt;td&gt;380 sprites, no strict
limit&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Game Boy Adv.&lt;/td&gt;
&lt;td&gt;Up to 64x64 px&lt;/td&gt;
&lt;td&gt;128 sprites, max 32 per
line&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Nintendo DS&lt;/td&gt;
&lt;td&gt;Up to 64x64 px&lt;/td&gt;
&lt;td&gt;128 sprites, max 32 per
line&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Nintendo 3DS&lt;/td&gt;
&lt;td&gt;Variable&lt;/td&gt;
&lt;td&gt;Sprite handling via 3D
engine&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Wii&lt;/td&gt;
&lt;td&gt;Variable&lt;/td&gt;
&lt;td&gt;Sprite handling via 3D
engine&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;PSP&lt;/td&gt;
&lt;td&gt;Variable&lt;/td&gt;
&lt;td&gt;Sprite handling via 3D
engine&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Switch&lt;/td&gt;
&lt;td&gt;Variable&lt;/td&gt;
&lt;td&gt;Sprite handling via 3D
engine&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;Key Observations:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Sprite-per-line limits were a critical constraint for 8-bit and 16-bit
consoles. Developers had to carefully manage sprite placement to avoid
flickering. The Neo Geo's massive sprite sizes (up to 16x512 pixels)
and high sprite count made it exceptional for arcade-style action games.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="video-output-specifications"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="#toc-entry-8"&gt;Video Output Specifications&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Display resolution, refresh rate, and aspect ratio define the visual
output characteristics of each console.&lt;/p&gt;
&lt;div class="section" id="display-characteristics"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="#toc-entry-9"&gt;Display Characteristics&lt;/a&gt;&lt;/h3&gt;
&lt;table border="1" class="docutils"&gt;
&lt;colgroup&gt;
&lt;col width="27%" /&gt;
&lt;col width="33%" /&gt;
&lt;col width="24%" /&gt;
&lt;col width="15%" /&gt;
&lt;/colgroup&gt;
&lt;thead valign="bottom"&gt;
&lt;tr&gt;&lt;th class="head"&gt;Console&lt;/th&gt;
&lt;th class="head"&gt;Resolution&lt;/th&gt;
&lt;th class="head"&gt;Refresh Rate&lt;/th&gt;
&lt;th class="head"&gt;Aspect
Ratio&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td&gt;Game Boy&lt;/td&gt;
&lt;td&gt;160x144&lt;/td&gt;
&lt;td&gt;59.7 Hz&lt;/td&gt;
&lt;td&gt;10:9&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Game Boy Color&lt;/td&gt;
&lt;td&gt;160x144&lt;/td&gt;
&lt;td&gt;59.7 Hz&lt;/td&gt;
&lt;td&gt;10:9&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;NES&lt;/td&gt;
&lt;td&gt;256x240&lt;/td&gt;
&lt;td&gt;60 Hz (NTSC)
50 Hz (PAL)&lt;/td&gt;
&lt;td&gt;4:3&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;SNES&lt;/td&gt;
&lt;td&gt;256x224
512x448i&lt;/td&gt;
&lt;td&gt;60 Hz (NTSC)
50 Hz (PAL)&lt;/td&gt;
&lt;td&gt;4:3&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;PC Engine&lt;/td&gt;
&lt;td&gt;256x224&lt;/td&gt;
&lt;td&gt;59.94 Hz&lt;/td&gt;
&lt;td&gt;4:3&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Neo Geo&lt;/td&gt;
&lt;td&gt;320x224&lt;/td&gt;
&lt;td&gt;59.18 Hz&lt;/td&gt;
&lt;td&gt;4:3&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Game Boy Adv.&lt;/td&gt;
&lt;td&gt;240x160&lt;/td&gt;
&lt;td&gt;59.7 Hz&lt;/td&gt;
&lt;td&gt;3:2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Nintendo DS&lt;/td&gt;
&lt;td&gt;256x192
(per screen)&lt;/td&gt;
&lt;td&gt;59.8 Hz&lt;/td&gt;
&lt;td&gt;4:3&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Nintendo 3DS&lt;/td&gt;
&lt;td&gt;400x240 (top)
320x240 (bottom)&lt;/td&gt;
&lt;td&gt;60 Hz&lt;/td&gt;
&lt;td&gt;5:3
(top)
4:3
(bottom)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Wii&lt;/td&gt;
&lt;td&gt;640x480&lt;/td&gt;
&lt;td&gt;60 Hz&lt;/td&gt;
&lt;td&gt;4:3 or
16:9&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;PSP&lt;/td&gt;
&lt;td&gt;480x272&lt;/td&gt;
&lt;td&gt;60 Hz&lt;/td&gt;
&lt;td&gt;16:9&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Switch&lt;/td&gt;
&lt;td&gt;1280x720
(Handheld)
1920x1080 (Docked)&lt;/td&gt;
&lt;td&gt;60 Hz&lt;/td&gt;
&lt;td&gt;16:9&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;Key Observations:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Resolution evolved from the Game Boy's 160x144 to Full HD (1920x1080)
on the Switch when docked. Most classic consoles targeted NTSC's 60 Hz
or PAL's 50 Hz refresh rates. The shift from 4:3 to 16:9 aspect ratios
occurred around the PSP/Wii generation.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="audio-capabilities"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="#toc-entry-10"&gt;Audio Capabilities&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Audio capabilities progressed from simple tone generators to full PCM
sample playback and streaming capabilities.&lt;/p&gt;
&lt;div class="section" id="sound-architecture"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="#toc-entry-11"&gt;Sound Architecture&lt;/a&gt;&lt;/h3&gt;
&lt;table border="1" class="docutils"&gt;
&lt;colgroup&gt;
&lt;col width="30%" /&gt;
&lt;col width="41%" /&gt;
&lt;col width="30%" /&gt;
&lt;/colgroup&gt;
&lt;thead valign="bottom"&gt;
&lt;tr&gt;&lt;th class="head"&gt;Console&lt;/th&gt;
&lt;th class="head"&gt;Sound Channels&lt;/th&gt;
&lt;th class="head"&gt;Sample Rate&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td&gt;Game Boy&lt;/td&gt;
&lt;td&gt;4 (2 square, 1 wave,
1 noise)&lt;/td&gt;
&lt;td&gt;~8 kHz&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Game Boy Color&lt;/td&gt;
&lt;td&gt;4 (same as GB)&lt;/td&gt;
&lt;td&gt;~8 kHz&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;NES&lt;/td&gt;
&lt;td&gt;5 (2 pulse, 1 triangle,
1 noise, 1 DPCM)&lt;/td&gt;
&lt;td&gt;~21.3 kHz (NTSC)
~17.3 kHz (PAL)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;SNES&lt;/td&gt;
&lt;td&gt;8 PCM&lt;/td&gt;
&lt;td&gt;32 kHz&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;PC Engine&lt;/td&gt;
&lt;td&gt;6 PCM&lt;/td&gt;
&lt;td&gt;~7.16 kHz to
~20 kHz&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Neo Geo&lt;/td&gt;
&lt;td&gt;4 FM, 3 PSG, ADPCM-A,
ADPCM-B&lt;/td&gt;
&lt;td&gt;~15.7 kHz
(ADPCM-A)
~18.5 kHz
(ADPCM-B)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Game Boy Adv.&lt;/td&gt;
&lt;td&gt;6 (2 direct PCM +
4 PSG)&lt;/td&gt;
&lt;td&gt;32 kHz&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Nintendo DS&lt;/td&gt;
&lt;td&gt;16 PCM&lt;/td&gt;
&lt;td&gt;32 kHz&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Nintendo 3DS&lt;/td&gt;
&lt;td&gt;24 PCM&lt;/td&gt;
&lt;td&gt;32 kHz&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Wii&lt;/td&gt;
&lt;td&gt;64 PCM&lt;/td&gt;
&lt;td&gt;48 kHz&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;PSP&lt;/td&gt;
&lt;td&gt;32 PCM&lt;/td&gt;
&lt;td&gt;44.1 kHz&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Switch&lt;/td&gt;
&lt;td&gt;32 PCM&lt;/td&gt;
&lt;td&gt;48 kHz&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;div class="section" id="audio-output"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="#toc-entry-12"&gt;Audio Output&lt;/a&gt;&lt;/h3&gt;
&lt;table border="1" class="docutils"&gt;
&lt;colgroup&gt;
&lt;col width="29%" /&gt;
&lt;col width="43%" /&gt;
&lt;col width="29%" /&gt;
&lt;/colgroup&gt;
&lt;thead valign="bottom"&gt;
&lt;tr&gt;&lt;th class="head"&gt;Console&lt;/th&gt;
&lt;th class="head"&gt;Audio Processor&lt;/th&gt;
&lt;th class="head"&gt;Audio Output&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td&gt;Game Boy&lt;/td&gt;
&lt;td&gt;Custom Sharp LR35902&lt;/td&gt;
&lt;td&gt;Mono&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Game Boy Color&lt;/td&gt;
&lt;td&gt;Custom Sharp Z80&lt;/td&gt;
&lt;td&gt;Mono&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;NES&lt;/td&gt;
&lt;td&gt;Ricoh 2A03 (NTSC) /
Ricoh 2A07 (PAL)&lt;/td&gt;
&lt;td&gt;Mono&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;SNES&lt;/td&gt;
&lt;td&gt;Sony SPC700 + DSP&lt;/td&gt;
&lt;td&gt;Stereo&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;PC Engine&lt;/td&gt;
&lt;td&gt;HuC6280 PSG&lt;/td&gt;
&lt;td&gt;Mono&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Neo Geo&lt;/td&gt;
&lt;td&gt;Yamaha YM2610&lt;/td&gt;
&lt;td&gt;Stereo&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Game Boy Adv.&lt;/td&gt;
&lt;td&gt;Custom 2D Core&lt;/td&gt;
&lt;td&gt;Stereo&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Nintendo DS&lt;/td&gt;
&lt;td&gt;2D/3D Graphics Engine&lt;/td&gt;
&lt;td&gt;Stereo&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Nintendo 3DS&lt;/td&gt;
&lt;td&gt;PICA200 GPU&lt;/td&gt;
&lt;td&gt;Stereo&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Wii&lt;/td&gt;
&lt;td&gt;ATI Hollywood GPU&lt;/td&gt;
&lt;td&gt;Stereo / DPL II&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;PSP&lt;/td&gt;
&lt;td&gt;Sony CXD2962GG + Media&lt;/td&gt;
&lt;td&gt;Stereo&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;Switch&lt;/td&gt;
&lt;td&gt;NVIDIA Tegra X1&lt;/td&gt;
&lt;td&gt;Stereo / DPL IIx&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;Key Observations:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;The SNES was revolutionary with its 8-channel PCM audio at 32 kHz,
enabling CD-quality sound. The transition from mono to stereo output
occurred in the 16-bit generation. Modern consoles support Dolby
Pro Logic surround sound encoding.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="special-graphics-features"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="#toc-entry-13"&gt;Special Graphics Features&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Beyond basic sprite and tile rendering, many consoles included special
graphics modes that enabled advanced visual effects.&lt;/p&gt;
&lt;div class="section" id="hardware-effects-by-console"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="#toc-entry-14"&gt;Hardware Effects by Console&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Game Boy / Game Boy Color:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;No special graphics modes beyond basic tile and sprite rendering&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;NES:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Attribute Tables (Limited Tile Coloring)&lt;/li&gt;
&lt;li&gt;CHR-ROM for Tile-Based Graphics&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;SNES:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;strong&gt;Mode 7&lt;/strong&gt;: Affine transformations for scaling and rotation, enabling
pseudo-3D effects (used in games like F-Zero and Super Mario Kart)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Windowing Effects&lt;/strong&gt;: Variable transparency regions&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;HDMA&lt;/strong&gt; (Horizontal Direct Memory Access): Per-scanline effects&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Color Math&lt;/strong&gt;: Hardware addition/subtraction for transparency and
lighting effects&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;PC Engine:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;No special graphics modes beyond standard tile/sprite capabilities&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Neo Geo:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;strong&gt;Hardware Scaling&lt;/strong&gt; for sprites&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Line Scroll&lt;/strong&gt;: Independent line offsets for parallax effects&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Raster Effects&lt;/strong&gt;: Per-scanline modifications&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Game Boy Advance:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;strong&gt;Affine Transformation&lt;/strong&gt;: Mode 7-like scaling and rotation&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Mosaic Effect&lt;/strong&gt;: Hardware pixelation for special effects&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Alpha Blending&lt;/strong&gt;: Multi-layer transparency&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Object Priority&lt;/strong&gt;: Hardware Z-ordering for sprites and backgrounds&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Nintendo DS:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;strong&gt;3D Rendering&lt;/strong&gt;: Hardware-accelerated 3D graphics engine&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Extended Affine Transformations&lt;/strong&gt;: Advanced 2D rotation and scaling&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Fog Effects&lt;/strong&gt;: Depth-based atmospheric effects&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Multiple Background Layers&lt;/strong&gt;: Up to 4 background layers with
independent scrolling&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Nintendo 3DS:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;strong&gt;Stereoscopic 3D&lt;/strong&gt;: Glasses-free autostereoscopic 3D display&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Advanced Shader Support&lt;/strong&gt;: Programmable vertex and fragment shaders&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;GPU-Accelerated Rendering&lt;/strong&gt;: PICA200 graphics processor&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Wii:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;strong&gt;GPU Effects&lt;/strong&gt;: Programmable shaders, bloom, motion blur&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Texture Mapping&lt;/strong&gt;: Advanced texture filtering and mipmapping&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Bump Mapping&lt;/strong&gt;: Per-pixel lighting simulation&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Hardware Anti-Aliasing&lt;/strong&gt;: Multi-sample anti-aliasing (MSAA)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;PSP:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;strong&gt;Hardware Transform &amp;amp; Lighting&lt;/strong&gt; (T&amp;amp;L): Vertex processing on GPU&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Texture Compression&lt;/strong&gt;: Efficient VRAM usage&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Advanced Alpha Blending&lt;/strong&gt;: Complex transparency effects&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Switch:&lt;/strong&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;strong&gt;Advanced Shaders&lt;/strong&gt;: Physically-Based Rendering (PBR)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Hardware-Accelerated Global Illumination&lt;/strong&gt;: Realistic lighting&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;HDR&lt;/strong&gt; (High Dynamic Range): Expanded color and brightness range&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Post-Processing Effects&lt;/strong&gt;: Depth of field, screen-space ambient
occlusion (SSAO), temporal anti-aliasing&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Key Observations:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;The SNES Mode 7 was revolutionary for its time, enabling pseudo-3D
effects with 2D hardware. The transition from fixed-function 2D
hardware to programmable 3D GPUs occurred around the Nintendo DS/PSP
generation. Modern consoles like the Switch support physically-based
rendering and advanced post-processing effects comparable to modern
gaming PCs.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="conclusion"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="#toc-entry-15"&gt;Conclusion&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;The evolution of gaming console hardware represents one of the most
dramatic technological progressions in computing history. From the
humble Game Boy's 4.19 MHz processor and 8 KB of RAM to the Switch's
1+ GHz quad-core CPU and 4 GB of RAM, each generation brought order-of-
magnitude improvements in capabilities.&lt;/p&gt;
&lt;p&gt;Understanding these hardware specifications is essential for homebrew
developers targeting specific platforms. The constraints of each
system - limited sprite counts, scanline restrictions, memory budgets -
defined the creative solutions developers employed to create memorable
gaming experiences.&lt;/p&gt;
&lt;p&gt;Whether you're developing a Game Boy game with 40 sprites and 4 colors,
or a Switch title with millions of polygons and advanced shaders, these
specifications provide the foundation for understanding what's possible
on each platform.&lt;/p&gt;
&lt;p&gt;For developers, these tables serve as quick references when planning
projects. For enthusiasts, they illuminate why certain games looked and
played the way they did. The ingenuity of developers working within
these constraints produced some of gaming's most iconic titles.&lt;/p&gt;
&lt;/div&gt;
</content><category term="hardware"/><category term="hardware"/><category term="retro"/><category term="console"/><category term="comparison"/><category term="technical"/></entry><entry><title>Secure Boot with AHAB on i.MX93: A Complete Guide</title><link href="https://tprrt.tupi.fr/secure-boot-with-ahab-on-imx93.html" rel="alternate"/><published>2024-08-06T19:21:00+02:00</published><updated>2025-06-11T14:53:00+02:00</updated><author><name>tperrot</name></author><id>tag:tprrt.tupi.fr,2024-08-06:/secure-boot-with-ahab-on-imx93.html</id><summary type="html">&lt;p class="first last"&gt;Learn how to implement Secure Boot using AHAB on NXP i.MX93 processors
to protect your embedded devices from unauthorized code execution.&lt;/p&gt;
</summary><content type="html">&lt;p&gt;&lt;strong&gt;The security of embedded devices has never been more critical.&lt;/strong&gt; In a world
where attacks targeting IoT systems are becoming increasingly sophisticated,
ensuring the integrity of the boot process is a must. This is where &lt;strong&gt;Secure
Boot&lt;/strong&gt; comes inâan essential technology that guarantees only authorized code can
execute on a device from the moment it starts. In this article, we will explore
the implementation of Secure Boot using AHAB, the solution provided by NXP to
secure the i.MX93 from its initial boot stages.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Why is Secure Boot crucial for your device?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;A secure boot ensures that no malicious code interferes with the critical boot
process, protecting your device from attacks targeting the bootloader and early
boot stages. Furthermore, AHAB, integrated into i.MX93 processors, enables
advanced authentication right from the initial boot stages, ensuring that only
validated components can be loaded, thereby strengthening security from the
get-go.&lt;/p&gt;
&lt;p&gt;Secure boot is a critical security feature that ensures only authenticated and
authorized code can run on a device. It operates through a chain of trust, where
each component verifies the integrity of the next element in the chain.&lt;/p&gt;
&lt;p&gt;Several mechanisms must be used to authenticate each element of this chain, but
the mechanism for authenticating the first boot stages depends on the target SoC.
The i.MX93 series uses NXP's Advanced High Assurance Boot (AHAB) to secure the
first boot stages.&lt;/p&gt;
&lt;p&gt;For subsequent stages, you can implement mechanisms such as:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Using U-Boot's &amp;quot;verified boot&amp;quot; feature to sign the kernel,&lt;/li&gt;
&lt;li&gt;Using the default environment (cf. USE_DEFAULT_ENV_FILE), and restricting
write access to only a few environment variables (cf. ENV_WRITEABLE_LIST),
which are necessary for writable access, such as for OTA updates,&lt;/li&gt;
&lt;li&gt;Using DM-verity to authenticate the root filesystem,&lt;/li&gt;
&lt;li&gt;And finally, using OverlayFS combined with DM-crypt to mount encrypted,
writable subfolders.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Here, we'll focus on the first part of the secure boot process, using NXP's AHAB
to authenticate the bootloader on the NXP i.MX93 in single-boot mode. We will
also briefly discuss how to generate the keys to sign the bootloader and provide
an introduction to AHAB.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Note: AHAB also provides a complementary encryption feature designed to protect
the confidentiality and integrity of data, whereas secure boot focuses on
verifying the integrity and authenticity of the boot process. This post will not
cover encryption in detail.&lt;/em&gt;&lt;/p&gt;
&lt;div class="section" id="ahab-architecture"&gt;
&lt;h2&gt;AHAB Architecture&lt;/h2&gt;
&lt;p&gt;The AHAB authentication mechanism is based on public key cryptography using
asymmetric keys.&lt;/p&gt;
&lt;p&gt;On the i.MX93, AHAB support is provided by a security co-processor, the EdgeLock
enclave (ELE), which handles the authentication of binaries signed with one or
more private keys. This co-processor contains fuses that must be burned with the
hash of the public keys.&lt;/p&gt;
&lt;div class="section" id="ahab-containers"&gt;
&lt;h3&gt;AHAB Containers&lt;/h3&gt;
&lt;p&gt;Since multiple boot stages (e.g., TF-A, OP-TEE, U-Boot, etc.) and firmwares are
required to boot i.MX93 platforms, these binaries are packed into containers
using the &lt;a class="reference external" href="https://github.com/nxp-imx/imx-mkimage"&gt;imx-mkimage&lt;/a&gt; tool:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;bl31.bin
lpddr4_dmem_1d_v202201.bin
lpddr4_dmem_2d_v202201.bin
lpddr4_imem_1d_v202201.bin
lpddr4_imem_2d_v202201.bin
mx93a1-ahab-container.img
tee.bin
u-boot.bin
u-boot-spl.bin
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In i.MX93 single-boot mode, the bootloader image contains at least three
containers:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;strong&gt;mx93a1-ahab-container.img&lt;/strong&gt;: Contains the ELE Firmware.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;u-boot-atf-container.img&lt;/strong&gt;: Contains at least the SPL.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;flash.bin&lt;/strong&gt;: Contains TF-A, OP-TEE, and U-Boot.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;        *start ----&amp;gt; +---------------------------+ ---------
                     |   1st Container header    |   ^
                     |       and signature       |   |
                     +---------------------------+   |
                     | Padding for 1kB alignment |   |
*start + 0x400 ----&amp;gt; +---------------------------+   |
                     |   2nd Container header    |   |
                     |       and signature       |   |
                     +---------------------------+   |
                     |          Padding          |   |  Authenticated at
                     +---------------------------+   |  ELE ROM/FW Level
                     |           ELE FW          |   |
                     +---------------------------+   |
                     |          Padding          |   |
                     +---------------------------+   |
                     |       Cortex-M Image      |   |
                     +---------------------------+   |
                     |         SPL Image         |   v
                     +---------------------------+ ---------
                     |   3rd Container header    |   ^
                     |       and signature       |   |
                     +---------------------------+   |
                     |          Padding          |   | Authenticated
                     +---------------------------+   | at SPL Level
                     |            TF-A           |   |
                     +---------------------------+   |
                     |           OP-TEE          |   |
                     +---------------------------+   |
                     |           U-Boot          |   v
                     +---------------------------+ ---------
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;These containers are signed offline using &lt;a class="reference external" href="https://www.nxp.com/webapp/sps/download/license.jsp?colCode=IMX_CST_TOOL_NEW"&gt;NXP Code-Signing Tools (CST)&lt;/a&gt;, which
also allow the creation of an OEM private key infrastructure (PKI) and the
generation of the associated public keys (SRK) table, which is burned into the
fuses. The CST can also be used with the PKCS#11 standard to access
cryptographic services from tokens or devices such as HSM, TPM, and smart cards.&lt;/p&gt;
&lt;p&gt;The first container is signed with NXP keys and is authenticated by the ELE ROM,
while the other containers are signed with OEM keys.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="ahab-boot-flow"&gt;
&lt;h3&gt;AHAB Boot Flow&lt;/h3&gt;
&lt;p&gt;In single boot mode, the Cortex-A55 ROM reads data from the selected boot
device, loading all containers in the chosen boot image set one by one. All
images within each container (e.g., EdgeLock secure enclave firmware, Cortex-M33
firmware, A55 firmware, OP-TEE, and U-Boot) are loaded, and the EdgeLock secure
enclave (ELE) is tasked with authenticating them. The ELE firmware is
authenticated by the ELE ROM, and images in the second container are verified by
the ELE firmware.&lt;/p&gt;
&lt;p&gt;If the bootloader image contains more than two containers, the third and
subsequent containers are authenticated by the SPL instead of the ELE.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="pki-generation"&gt;
&lt;h2&gt;PKI Generation&lt;/h2&gt;
&lt;p&gt;To authenticate the bootloader, we need to generate keys. These keys can be
created with the &lt;a class="reference external" href="https://www.nxp.com/webapp/sps/download/license.jsp?colCode=IMX_CST_TOOL_NEW"&gt;CST&lt;/a&gt;. The private key will be used to sign the bootloader, and
the public key will be burned into the i.MX93 fuses to authenticate the
bootloader during boot.&lt;/p&gt;
&lt;p&gt;Follow these steps to generate the keys:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;cd&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;cst-3.4.1/keys
&lt;span class="nb"&gt;echo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;00000001&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;serial
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Write the passphrase for the certificate (replace &amp;quot;fooahabcert&amp;quot; with your
choice) in two lines, separated by &lt;tt class="docutils literal"&gt;\n&lt;/tt&gt;. It is important to store this
passphrase securely with backups:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;echo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-e&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;fooahabcert\nfooahabcert&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;key_pass.txt
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Generate a P384 ECC PKI tree with a subordinate SGK key on CST:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;./ahab_pki_tree.sh
&lt;span class="o"&gt;[&lt;/span&gt;...&lt;span class="o"&gt;]&lt;/span&gt;
Do&lt;span class="w"&gt; &lt;/span&gt;you&lt;span class="w"&gt; &lt;/span&gt;want&lt;span class="w"&gt; &lt;/span&gt;to&lt;span class="w"&gt; &lt;/span&gt;use&lt;span class="w"&gt; &lt;/span&gt;an&lt;span class="w"&gt; &lt;/span&gt;existing&lt;span class="w"&gt; &lt;/span&gt;CA&lt;span class="w"&gt; &lt;/span&gt;key&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;y/n&lt;span class="o"&gt;)&lt;/span&gt;?:&lt;span class="w"&gt; &lt;/span&gt;n

Key&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;type&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;options&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;confirm&lt;span class="w"&gt; &lt;/span&gt;targeted&lt;span class="w"&gt; &lt;/span&gt;device&lt;span class="w"&gt; &lt;/span&gt;supports&lt;span class="w"&gt; &lt;/span&gt;desired&lt;span class="w"&gt; &lt;/span&gt;key&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;type&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;:
Select&lt;span class="w"&gt; &lt;/span&gt;the&lt;span class="w"&gt; &lt;/span&gt;key&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;type&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;possible&lt;span class="w"&gt; &lt;/span&gt;values:&lt;span class="w"&gt; &lt;/span&gt;rsa,&lt;span class="w"&gt; &lt;/span&gt;rsa-pss,&lt;span class="w"&gt; &lt;/span&gt;ecc&lt;span class="o"&gt;)&lt;/span&gt;?:&lt;span class="w"&gt; &lt;/span&gt;ecc
Enter&lt;span class="w"&gt; &lt;/span&gt;length&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;elliptic&lt;span class="w"&gt; &lt;/span&gt;curve&lt;span class="w"&gt; &lt;/span&gt;to&lt;span class="w"&gt; &lt;/span&gt;be&lt;span class="w"&gt; &lt;/span&gt;used&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;PKI&lt;span class="w"&gt; &lt;/span&gt;tree:
Possible&lt;span class="w"&gt; &lt;/span&gt;values&lt;span class="w"&gt; &lt;/span&gt;p256,&lt;span class="w"&gt; &lt;/span&gt;p384,&lt;span class="w"&gt; &lt;/span&gt;p521:&lt;span class="w"&gt;  &lt;/span&gt;p384
Enter&lt;span class="w"&gt; &lt;/span&gt;the&lt;span class="w"&gt; &lt;/span&gt;digest&lt;span class="w"&gt; &lt;/span&gt;algorithm&lt;span class="w"&gt; &lt;/span&gt;to&lt;span class="w"&gt; &lt;/span&gt;use:&lt;span class="w"&gt; &lt;/span&gt;sha384
Enter&lt;span class="w"&gt; &lt;/span&gt;PKI&lt;span class="w"&gt; &lt;/span&gt;tree&lt;span class="w"&gt; &lt;/span&gt;duration&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;years&lt;span class="o"&gt;)&lt;/span&gt;:&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;10&lt;/span&gt;
Do&lt;span class="w"&gt; &lt;/span&gt;you&lt;span class="w"&gt; &lt;/span&gt;want&lt;span class="w"&gt; &lt;/span&gt;the&lt;span class="w"&gt; &lt;/span&gt;SRK&lt;span class="w"&gt; &lt;/span&gt;certificates&lt;span class="w"&gt; &lt;/span&gt;to&lt;span class="w"&gt; &lt;/span&gt;have&lt;span class="w"&gt; &lt;/span&gt;the&lt;span class="w"&gt; &lt;/span&gt;CA&lt;span class="w"&gt; &lt;/span&gt;flag&lt;span class="w"&gt; &lt;/span&gt;set?&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;y/n&lt;span class="o"&gt;)&lt;/span&gt;?:&lt;span class="w"&gt; &lt;/span&gt;n
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Generate the Signing Root Keys (SRK) Table and SRK Hash for 64-bit Linux machines:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;cd&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;../crts/
../linux64/bin/srktool&lt;span class="w"&gt; &lt;/span&gt;-a&lt;span class="w"&gt; &lt;/span&gt;-d&lt;span class="w"&gt; &lt;/span&gt;sha256&lt;span class="w"&gt; &lt;/span&gt;-s&lt;span class="w"&gt; &lt;/span&gt;sha384&lt;span class="w"&gt; &lt;/span&gt;-t&lt;span class="w"&gt; &lt;/span&gt;SRK_1_2_3_4_table.bin&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;-e&lt;span class="w"&gt; &lt;/span&gt;SRK_1_2_3_4_fuse.bin&lt;span class="w"&gt; &lt;/span&gt;-f&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-c&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;SRK1_sha384_secp384r1_v3_usr_crt.pem,&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;SRK2_sha384_secp384r1_v3_usr_crt.pem,&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;SRK3_sha384_secp384r1_v3_usr_crt.pem,&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;SRK4_sha384_secp384r1_v3_usr_crt.pem
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Do not enter spaces between the commas when specifying the SRKs in the &amp;quot;-c&amp;quot; or
&amp;quot;--certs&amp;quot; option. Otherwise, the certificates specified after the first space
will be excluded from the table.&lt;/p&gt;
&lt;p&gt;Regenerate the SRK HASH (SRK_1_2_3_4_fuse.bin) using SHA256 with the
SRK_1_2_3_4_table.bin:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;openssl&lt;span class="w"&gt; &lt;/span&gt;dgst&lt;span class="w"&gt; &lt;/span&gt;-binary&lt;span class="w"&gt; &lt;/span&gt;-sha256&lt;span class="w"&gt; &lt;/span&gt;SRK_1_2_3_4_table.bin
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Optionally, verify that the sha256sum of SRK_1_2_3_4_table matches the SRK_1_2_3_4_fuse.bin:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;od&lt;span class="w"&gt; &lt;/span&gt;-t&lt;span class="w"&gt; &lt;/span&gt;x4&lt;span class="w"&gt; &lt;/span&gt;SRK_1_2_3_4_fuse.bin
&lt;span class="m"&gt;0000000&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;29eec727&lt;span class="w"&gt; &lt;/span&gt;eaed9aa7&lt;span class="w"&gt; &lt;/span&gt;c7e53bc0&lt;span class="w"&gt; &lt;/span&gt;36835f78
&lt;span class="m"&gt;0000020&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;6901bc47&lt;span class="w"&gt; &lt;/span&gt;b244753c&lt;span class="w"&gt; &lt;/span&gt;f78d3162&lt;span class="w"&gt; &lt;/span&gt;27ae36b9
&lt;span class="m"&gt;0000040&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="bootloader-signature"&gt;
&lt;h2&gt;Bootloader Signature&lt;/h2&gt;
&lt;p&gt;The CST uses CSF description files to sign (and encrypt) containers generated by
imx-mkimage with OEM keys. When imx-mkimage generates containers, it also
specifies the block offsets to be used in the CSF description files. For
example, imx-mkimage returns the following values for your bootloader:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;CST: CONTAINER 0 offset: 0x0
CST: CONTAINER 0: Signature Block: offset is at 0x190
CST: CONTAINER 0 offset: 0x400
CST: CONTAINER 0: Signature Block: offset is at 0x490
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Where &lt;em&gt;0x190&lt;/em&gt; is the block offset for the second container header and &lt;em&gt;0x490&lt;/em&gt; is
the block offset for the third container header.&lt;/p&gt;
&lt;p&gt;The CSF description file used to sign a container contains three sections:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;em&gt;[Header]&lt;/em&gt;: Information about the HAB version to use for signing.&lt;/li&gt;
&lt;li&gt;&lt;em&gt;[Authenticate Data]&lt;/em&gt;: Information about the key used to sign.&lt;/li&gt;
&lt;li&gt;&lt;em&gt;[Install SRK]&lt;/em&gt;: Information about the container being signed.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The following CSF description files were used to sign the
&lt;em&gt;u-boot-atf-container.img&lt;/em&gt; in our example:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;[Header]&lt;/span&gt;
&lt;span class="na"&gt;Target&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;AHAB&lt;/span&gt;
&lt;span class="na"&gt;Version&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;1.0&lt;/span&gt;

&lt;span class="k"&gt;[Install SRK]&lt;/span&gt;
&lt;span class="c1"&gt;# SRK table generated by srktool&lt;/span&gt;
&lt;span class="na"&gt;File&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;SRK_1_2_3_4_table.bin&amp;quot;&lt;/span&gt;
&lt;span class="c1"&gt;# Public key certificate in PEM format&lt;/span&gt;
&lt;span class="na"&gt;Source&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;SRK1_sha384_secp384r1_v3_usr_crt.pem&amp;quot;&lt;/span&gt;
&lt;span class="c1"&gt;# Index of the public key certificate within the SRK table (0 .. 3)&lt;/span&gt;
&lt;span class="na"&gt;Source index&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;0&lt;/span&gt;
&lt;span class="c1"&gt;# Type of SRK set (NXP or OEM)&lt;/span&gt;
&lt;span class="na"&gt;Source set&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;OEM&lt;/span&gt;
&lt;span class="c1"&gt;# bitmask of the revoked SRKs&lt;/span&gt;
&lt;span class="na"&gt;Revocations&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;0x0&lt;/span&gt;

&lt;span class="k"&gt;[Authenticate Data]&lt;/span&gt;
&lt;span class="c1"&gt;# Binary to be signed generated by mkimage&lt;/span&gt;
&lt;span class="na"&gt;File&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;u-boot-atf-container.img&amp;quot;&lt;/span&gt;
&lt;span class="c1"&gt;# Offsets = Container header  Signature block (printed out by mkimage)&lt;/span&gt;
&lt;span class="na"&gt;Offsets&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;0x0 0x190&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The following CSF description files were used to sign &lt;em&gt;flash.bin&lt;/em&gt; in our
example:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;[Header]&lt;/span&gt;
&lt;span class="na"&gt;Target&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;AHAB&lt;/span&gt;
&lt;span class="na"&gt;Version&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;1.0&lt;/span&gt;

&lt;span class="k"&gt;[Install SRK]&lt;/span&gt;
&lt;span class="c1"&gt;# SRK table generated by srktool&lt;/span&gt;
&lt;span class="na"&gt;File&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;SRK_1_2_3_4_table.bin&amp;quot;&lt;/span&gt;
&lt;span class="c1"&gt;# Public key certificate in PEM format&lt;/span&gt;
&lt;span class="na"&gt;Source&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;SRK1_sha384_secp384r1_v3_usr_crt.pem&amp;quot;&lt;/span&gt;
&lt;span class="c1"&gt;# Index of the public key certificate within the SRK table (0 .. 3)&lt;/span&gt;
&lt;span class="na"&gt;Source index&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;0&lt;/span&gt;
&lt;span class="c1"&gt;# Type of SRK set (NXP or OEM)&lt;/span&gt;
&lt;span class="na"&gt;Source set&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;OEM&lt;/span&gt;
&lt;span class="c1"&gt;# bitmask of the revoked SRKs&lt;/span&gt;
&lt;span class="na"&gt;Revocations&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;0x0&lt;/span&gt;

&lt;span class="k"&gt;[Authenticate Data]&lt;/span&gt;
&lt;span class="c1"&gt;# Binary to be signed generated by mkimage&lt;/span&gt;
&lt;span class="na"&gt;File&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;flash.bin&amp;quot;&lt;/span&gt;
&lt;span class="c1"&gt;# Offsets = Container header  Signature block (printed out by mkimage)&lt;/span&gt;
&lt;span class="na"&gt;Offsets&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;0x400 0x490&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The first step is to generate a &lt;em&gt;u-boot-atf-container.img&lt;/em&gt;, then copy the block
offsets into the CSF description file to sign it:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;make&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;SOC&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;iMX9&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;REV&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;A1&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;dtbs&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;imx93-11x11-evk.dtb&lt;span class="w"&gt; &lt;/span&gt;u-boot-atf-container.img
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Next, sign it with the following command and replace the unsigned version:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;cst&lt;span class="w"&gt; &lt;/span&gt;-i&lt;span class="w"&gt; &lt;/span&gt;u-boot-atf-container.img.csf&lt;span class="w"&gt; &lt;/span&gt;-o&lt;span class="w"&gt; &lt;/span&gt;u-boot-atf-container.img.signed
mv&lt;span class="w"&gt; &lt;/span&gt;u-boot-atf-container.img.signed&lt;span class="w"&gt; &lt;/span&gt;u-boot-atf-container.img
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Then generate a &lt;em&gt;flash.bin&lt;/em&gt; containing the signed &lt;em&gt;u-boot-atf-container.img&lt;/em&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;make&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;SOC&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;iMX9&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;REV&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;A1&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;V2X&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;NO&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;dtbs&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;imx93-11x11-evk.dtb&lt;span class="w"&gt; &lt;/span&gt;flash_singleboot
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Finally, sign the resulting &lt;em&gt;flash.bin&lt;/em&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;cst&lt;span class="w"&gt; &lt;/span&gt;-i&lt;span class="w"&gt; &lt;/span&gt;flash.bin.csf&lt;span class="w"&gt; &lt;/span&gt;-o&lt;span class="w"&gt; &lt;/span&gt;flash.bin.signed
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="burn-fuses"&gt;
&lt;h2&gt;Burn Fuses&lt;/h2&gt;
&lt;p&gt;Once the signed &lt;em&gt;flash.bin&lt;/em&gt; is flashed, you need to burn the public keys used to
sign the bootloader into the i.MX93 fuses to finalize AHAB secure boot. This
requires using a U-Boot that provides AHAB functionalities, such as checking ELE
events during bootloader authentication and securing the device.&lt;/p&gt;
&lt;div class="section" id="program-srk"&gt;
&lt;h3&gt;Program SRK&lt;/h3&gt;
&lt;p&gt;The following commands enable AHAB secure boot by programming the
&lt;em&gt;SRK_HASH[255:0]&lt;/em&gt; fuses on i.MX93, ensuring that only bootloaders signed with
keys matching the SRK hash programmed into the fuses will be accepted:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;fuse&lt;span class="w"&gt; &lt;/span&gt;prog&lt;span class="w"&gt; &lt;/span&gt;-y&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;16&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;0x29eec727
fuse&lt;span class="w"&gt; &lt;/span&gt;prog&lt;span class="w"&gt; &lt;/span&gt;-y&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;16&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;0xeaed9aa7
fuse&lt;span class="w"&gt; &lt;/span&gt;prog&lt;span class="w"&gt; &lt;/span&gt;-y&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;16&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;0xc7e53bc0
fuse&lt;span class="w"&gt; &lt;/span&gt;prog&lt;span class="w"&gt; &lt;/span&gt;-y&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;16&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;0x36835f78
fuse&lt;span class="w"&gt; &lt;/span&gt;prog&lt;span class="w"&gt; &lt;/span&gt;-y&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;16&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;4&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;0x6901bc47
fuse&lt;span class="w"&gt; &lt;/span&gt;prog&lt;span class="w"&gt; &lt;/span&gt;-y&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;16&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;0xb244753c
fuse&lt;span class="w"&gt; &lt;/span&gt;prog&lt;span class="w"&gt; &lt;/span&gt;-y&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;16&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;6&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;0xf78d3162
fuse&lt;span class="w"&gt; &lt;/span&gt;prog&lt;span class="w"&gt; &lt;/span&gt;-y&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;16&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;7&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;0x27ae36b9
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="close-the-device"&gt;
&lt;h3&gt;Close the Device&lt;/h3&gt;
&lt;p&gt;Once the SRK fuses are programmed, you can &amp;quot;close&amp;quot; the device to allow only the
bootloader signed with keys matching the SRK table to boot:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ahab_close
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Before closing the device, you can verify that the fuses have been written
correctly by checking that no ELE events are raised:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ahab_status
Lifecycle:&lt;span class="w"&gt; &lt;/span&gt;0x00000008,&lt;span class="w"&gt; &lt;/span&gt;OEM&lt;span class="w"&gt; &lt;/span&gt;Open

No&lt;span class="w"&gt; &lt;/span&gt;Events&lt;span class="w"&gt; &lt;/span&gt;Found!
&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt;
Lifecycle:&lt;span class="w"&gt; &lt;/span&gt;0x00000008,&lt;span class="w"&gt; &lt;/span&gt;OEM&lt;span class="w"&gt; &lt;/span&gt;Open

No&lt;span class="w"&gt; &lt;/span&gt;Events&lt;span class="w"&gt; &lt;/span&gt;Found!
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Once the device is closed, the &lt;em&gt;ahab_status&lt;/em&gt; command will show &lt;em&gt;OEM closed&lt;/em&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ahab_status
Lifecycle:&lt;span class="w"&gt; &lt;/span&gt;0x00000020,&lt;span class="w"&gt; &lt;/span&gt;OEM&lt;span class="w"&gt; &lt;/span&gt;closed

No&lt;span class="w"&gt; &lt;/span&gt;Events&lt;span class="w"&gt; &lt;/span&gt;Found!
&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt;
Lifecycle:&lt;span class="w"&gt; &lt;/span&gt;0x00000020,&lt;span class="w"&gt; &lt;/span&gt;OEM&lt;span class="w"&gt; &lt;/span&gt;closed
No&lt;span class="w"&gt; &lt;/span&gt;Events&lt;span class="w"&gt; &lt;/span&gt;Found!
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;As long as &lt;em&gt;OEM Open&lt;/em&gt; appears in the status, the device is not secured and can still
execute unsigned bootloaders or those signed with invalid keys.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="conclusion"&gt;
&lt;h2&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;By implementing AHAB on the i.MX93 platform, you can ensure that your boot
process is protected from unauthorized code. The use of public key cryptography
and secure containers adds an extra layer of security, making your device more
resilient to attacks. This process is crucial for applications where integrity
and authenticity from the very first boot stage are paramount.&lt;/p&gt;
&lt;/div&gt;
</content><category term="Security"/><category term="security"/><category term="embedded"/><category term="imx93"/><category term="secure-boot"/><category term="ahab"/><category term="nxp"/></entry><entry><title>Zephyr Device Tree Guide</title><link href="https://tprrt.tupi.fr/zephyr-device-tree-guide.html" rel="alternate"/><published>2022-07-29T20:32:00+02:00</published><updated>2022-07-29T20:32:00+02:00</updated><author><name>tperrot</name></author><id>tag:tprrt.tupi.fr,2022-07-29:/zephyr-device-tree-guide.html</id><summary type="html"/><content type="html">&lt;div class="section" id="introduction"&gt;
&lt;h2&gt;Introduction&lt;/h2&gt;
&lt;p&gt;The goal of the &lt;a class="reference external" href="https://zephyrproject.org/"&gt;Zephyr project&lt;/a&gt;, hosted by the Linux foundation, since 2016, is to provide a safe and secured real time operating system (RTOS) for connected devices that are too small for Linux, or for core companion, through the Apache 2.0 open source license.&lt;/p&gt;
&lt;p&gt;It is designed for resource-constrained devices such as microcontrollers and Internet of Things (IoT) devices, to be modular and scalable. This makes it ideal for a wide range of devices, from simple sensors to complex systems. The operating system is written in C and is fully compatible with the C11 and C++17 standards.&lt;/p&gt;
&lt;p&gt;One of the key benefits of the Zephyr device model is its small footprint, it can be configured to run on devices with as little as 10 KB of memory.&lt;/p&gt;
&lt;p&gt;It supports multiple 32 bits and 64 bits architectures: Cortex-A, Cortex-M, Cortex-R, RISC-V, x86-64, etc.
But it also support several boards and extensions: Feather, nRF52840, ST Discovery, ST Nucleo, ESP-32, etc.
It is able to manage several kinds of connectivity: Bluetooth, ethernet, wifi, LoRa.
And it support some network protocols: IPv4, IPv6,UDP, TCP, CoAP, LWM2M, MQTT, DNS, etc.&lt;/p&gt;
&lt;p&gt;As Linux, Zephyr use &lt;a class="reference external" href="https://www.kernel.org/doc/html/latest/kbuild/kconfig-language.html"&gt;Kconfig&lt;/a&gt;, and its device model is mainly based on &lt;a class="reference external" href="https://www.devicetree.org/"&gt;device tree&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="device-tree"&gt;
&lt;h2&gt;Device tree&lt;/h2&gt;
&lt;p&gt;Device trees are tree data structures that describe the hardware components and their relationships in a system.
They are stored in a text file, named device tree sources (*.dts), and they written by developers to describe hardware architectures of SoCs and boards.
And they are used by the operating system to determine how to initialize and interact with the hardware.&lt;/p&gt;
&lt;p&gt;Each node describe a device of the system, has its own properties that describe their characteristics, and they have only one parent (except for the root node).&lt;/p&gt;
&lt;p&gt;Each device driver is associated with a specific device tree node, which represents a hardware component in the system. The device driver provides the necessary code and data to control the behavior of the hardware component.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nl"&gt;test_i2c_bme280&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;bme280&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;compatible&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;bosch,bme280&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;reg&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="mh"&gt;0x6&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;};&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In the Linux kernel, device tree sources are compiled to device tree binaries (dtb) that are parsed, at boot, by bootloader stages (U-Boot, TF-A...) and the kernel to allow support several hardware configuration with same binaries.&lt;/p&gt;
&lt;p&gt;But in Zephyr, device tree sources are transformed to a &amp;quot;devicetree_generated.h&amp;quot; C header file at build, that contains macro definitions and data structures allowing device drivers to access information about the hardware components in the system, such as the memory mapping of a device, its pin assignments, and its IRQ numbers:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#define DT_COMPAT_HAS_OKAY_bosch_bme280 1&lt;/span&gt;
&lt;span class="cp"&gt;#define DT_N_INST_bosch_bme280_NUM_OKAY 1&lt;/span&gt;
&lt;span class="cp"&gt;#define DT_FOREACH_OKAY_bosch_bme280(fn) fn(DT_N_S_soc_S_i2c_40005400_S_bme280_77)&lt;/span&gt;
&lt;span class="cp"&gt;#define DT_FOREACH_OKAY_VARGS_bosch_bme280(fn, ...) fn(DT_N_S_soc_S_i2c_40005400_S_bme280_77, __VA_ARGS__)&lt;/span&gt;
&lt;span class="cp"&gt;#define DT_FOREACH_OKAY_INST_bosch_bme280(fn) fn(0)&lt;/span&gt;
&lt;span class="cp"&gt;#define DT_FOREACH_OKAY_INST_VARGS_bosch_bme280(fn, ...) fn(0, __VA_ARGS__)&lt;/span&gt;
&lt;span class="cp"&gt;#define DT_COMPAT_bosch_bme280_BUS_i2c 1&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Where:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;strong&gt;DT_COMPAT_HAS_OKAY_bosch_bme280&lt;/strong&gt;: indicates that there is at least one instance of BME280&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;DT_N_INST_bosch_bme280_NUM_OKAY&lt;/strong&gt;: defines the number of BME280 instances that are marked okay&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;DT_FOREACH_OKAY_bosch_bme280&lt;/strong&gt;: allows you to apply a function &lt;em&gt;fn&lt;/em&gt; to each instance of the BME280&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;DT_FOREACH_OKAY_VARGS_bosch_bme280&lt;/strong&gt;: also allows you to apply a function &lt;em&gt;fn&lt;/em&gt; to each instance of the BME280, but with additional arguments&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;DT_FOREACH_OKAY_INST_bosch_bme280&lt;/strong&gt;: allows you to apply a function &lt;em&gt;fn&lt;/em&gt; to each instance of the BME280, passing the instance number as an argument&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;DT_FOREACH_OKAY_INST_VARGS_bosch_bme280&lt;/strong&gt;: is similar to the previous macro, but this one allows for additional arguments&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;DT_COMPAT_bosch_bme280_BUS_i2c&lt;/strong&gt;: indicates that the BME280 device is connected to an I2C bus.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;DT_N_S_soc_S_i2c_40005400_S_bme280_77&lt;/strong&gt;: refers to a specific node in the device tree, here it refers to the BME280 sensor connected to the I2C controller with the base address 0x40005400 within the SoC. The sensor's address on this I2C bus is 0x77.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;In addition, device tree sources can be extended or overridden, for example to connect additional devices to a board, or to disable board devices which will not be used:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;aliases&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="n"&gt;bme280&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;bme280&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="p"&gt;};&lt;/span&gt;
&lt;span class="p"&gt;};&lt;/span&gt;

&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;spi1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;status&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;disabled&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;};&lt;/span&gt;

&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;i2c1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;status&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;okay&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nl"&gt;bme280&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;bme280&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="mi"&gt;77&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="n"&gt;compatible&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;bosch,bme280&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="n"&gt;reg&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="mh"&gt;0x77&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="p"&gt;};&lt;/span&gt;
&lt;span class="p"&gt;};&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="binding"&gt;
&lt;h2&gt;Binding&lt;/h2&gt;
&lt;p&gt;Content of device tree sources is described in binding files, that are written in human readable and easy to parse YAML.
Binding files can be also used to validate device tree sources by comparing the information in the YAML file with the information in the device tree sources.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;description&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;BME280 integrated environmental sensor&lt;/span&gt;

&lt;span class="nt"&gt;compatible&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;bosch,bme280&amp;quot;&lt;/span&gt;

&lt;span class="nt"&gt;include&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p p-Indicator"&gt;[&lt;/span&gt;&lt;span class="nv"&gt;sensor-device.yaml&lt;/span&gt;&lt;span class="p p-Indicator"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;i2c-device.yaml&lt;/span&gt;&lt;span class="p p-Indicator"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="device-driver"&gt;
&lt;h2&gt;Device driver&lt;/h2&gt;
&lt;p&gt;In Zephyr, a device driver can access the properties of an associated node in the device tree using the macro that are defined in C header files.
For example, the following code can be used to initialize a BME280 sensor using properties defined in the device tree:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cpf"&gt;&amp;lt;device.h&amp;gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cpf"&gt;&amp;lt;drivers/i2c.h&amp;gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cpf"&gt;&amp;lt;devicetree.h&amp;gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cpf"&gt;&amp;lt;zephyr.h&amp;gt;&lt;/span&gt;

&lt;span class="c1"&gt;// Define the node identifier for the BME280 sensor&lt;/span&gt;
&lt;span class="cp"&gt;#define BME280_NODE DT_N_S_soc_S_i2c_40005400_S_bme280_77&lt;/span&gt;

&lt;span class="c1"&gt;// Function to initialize the BME280 sensor&lt;/span&gt;
&lt;span class="k"&gt;static&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;bme280_init&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;struct&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nc"&gt;device&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="c1"&gt;// Check if the node is available&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;device_is_ready&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;printk&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Device %s is not ready&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;ENODEV&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="c1"&gt;// Retrieve the I2C device associated with the BME280 node&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;struct&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nc"&gt;device&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;i2c_dev&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;DEVICE_DT_GET&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DT_BUS&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BME280_NODE&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;device_is_ready&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i2c_dev&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;printk&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;I2C device not ready&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;ENODEV&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="c1"&gt;// Write some initialization code here, such as configuring registers&lt;/span&gt;

&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;printk&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;BME280 sensor initialized&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="c1"&gt;// Initialize the BME280 sensor at boot time&lt;/span&gt;
&lt;span class="n"&gt;SYS_INIT&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;bme280_init&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;APPLICATION&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;CONFIG_APPLICATION_INIT_PRIORITY&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="conclusion"&gt;
&lt;h2&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;Those who have already implemented BSP or driver on Linux shouldn't encounter too much difficulty, but on the other hand, the step is a little higher for people coming from the world of micro-controllers.&lt;/p&gt;
&lt;/div&gt;
</content><category term="Embedded"/><category term="zephyr"/><category term="device-tree"/><category term="rtos"/><category term="embedded"/></entry><entry><title>Build RIOT-OS with Podman</title><link href="https://tprrt.tupi.fr/build-riot-os-with-podman.html" rel="alternate"/><published>2020-09-27T13:01:00+02:00</published><updated>2025-06-11T14:53:00+02:00</updated><author><name>tperrot</name></author><id>tag:tprrt.tupi.fr,2020-09-27:/build-riot-os-with-podman.html</id><summary type="html">&lt;p class="first last"&gt;This article is a tip that explains how it is possible to build a
&lt;a class="reference external" href="https://github.com/RIOT-OS/RIOT"&gt;RIOT-OS&lt;/a&gt; application with &lt;a class="reference external" href="https://podman.io"&gt;Podman&lt;/a&gt;.&lt;/p&gt;
</summary><content type="html">&lt;div class="section" id="summary"&gt;
&lt;h2&gt;Summary&lt;/h2&gt;
&lt;p&gt;This article is a tip that explains how it is possible to build a &lt;a class="reference external" href="https://github.com/RIOT-OS/RIOT"&gt;RIOT-OS&lt;/a&gt;
application with &lt;a class="reference external" href="https://podman.io"&gt;Podman&lt;/a&gt; and the official build container. And I would like to
take this opportunity to introduce you to &lt;a class="reference external" href="https://podman.io"&gt;Podman&lt;/a&gt; and &lt;a class="reference external" href="https://github.com/RIOT-OS/RIOT"&gt;RIOT-OS&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="podman"&gt;
&lt;h2&gt;Podman&lt;/h2&gt;
&lt;p&gt;Some Linux distribution, like &lt;a class="reference external" href="https://getfedora.org"&gt;Fedora&lt;/a&gt; chosen to officially support only
&lt;a class="reference external" href="https://podman.io"&gt;Podman&lt;/a&gt; instead of &lt;a class="reference external" href="https://www.docker.com"&gt;Docker&lt;/a&gt; for several reasons:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;It is daemonless container engine.&lt;/li&gt;
&lt;li&gt;It is rootless.&lt;/li&gt;
&lt;li&gt;It follows Open Container Initiative (&lt;a class="reference external" href="https://opencontainers.org"&gt;OCI&lt;/a&gt;) standards.&lt;/li&gt;
&lt;li&gt;It is safer than the &lt;a class="reference external" href="https://www.docker.com"&gt;Docker&lt;/a&gt; engine.&lt;/li&gt;
&lt;li&gt;It introduces the notion of &lt;a class="reference external" href="https://kubernetes.io/docs/concepts/workloads/pods"&gt;Pods&lt;/a&gt;: a group of container(s) that share storage
or network resources.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Moreover, &lt;a class="reference external" href="https://podman.io"&gt;Podman&lt;/a&gt; is able to use the images built by the &lt;a class="reference external" href="https://www.docker.com"&gt;Docker&lt;/a&gt; engine and
has been stored in &lt;a class="reference external" href="https://www.docker.com"&gt;Docker&lt;/a&gt; registry.&lt;/p&gt;
&lt;p&gt;However, most of the time the &lt;a class="reference external" href="https://podman.io"&gt;Podman&lt;/a&gt; commands are identical to that of
&lt;a class="reference external" href="https://www.docker.com"&gt;Docker&lt;/a&gt;, then a simple alias is enough to be misleading:
&lt;em&gt;alias docker=podman&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;But as &lt;a class="reference external" href="https://podman.io"&gt;Podman&lt;/a&gt; is rootless and safer than &lt;a class="reference external" href="https://www.docker.com"&gt;Docker&lt;/a&gt;, then sometimes it is
necessary to specify additional security parameters.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="riot-os"&gt;
&lt;h2&gt;RIOT-OS&lt;/h2&gt;
&lt;p&gt;&lt;a class="reference external" href="https://github.com/RIOT-OS/RIOT"&gt;RIOT-OS&lt;/a&gt; is a memory-constrained &lt;a class="reference external" href="https://en.wikipedia.org/wiki/Real-time_operating_system"&gt;RTOS&lt;/a&gt;, such as &lt;a class="reference external" href="https://en.wikipedia.org/wiki/Contiki"&gt;Contiki&lt;/a&gt;, that provides
real-time and multithreading abilities, and it runs on processors from 8bits to
32bits.&lt;/p&gt;
&lt;p&gt;It was designed for &lt;a class="reference external" href="https://en.wikipedia.org/wiki/Internet_of_things"&gt;IoT&lt;/a&gt; devices then to be low power consumption and it
provides three very complete network stacks including some protocols as:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="https://en.wikipedia.org/wiki/IPv6"&gt;IPv6&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://en.wikipedia.org/wiki/6LoWPAN"&gt;6LoWPAN&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://en.wikipedia.org/wiki/Constrained_Application_Protocol"&gt;CoAP&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;etc.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The &lt;a class="reference external" href="https://github.com/RIOT-OS/RIOT"&gt;RIOT-OS&lt;/a&gt; project also provides some useful tools including a build
container (&lt;a class="reference external" href="https://github.com/RIOT-OS/riotdocker"&gt;riotdocker&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;And the build environment of &lt;a class="reference external" href="https://github.com/RIOT-OS/RIOT"&gt;RIOT-OS&lt;/a&gt; offers a &lt;a class="reference external" href="https://en.wikipedia.org/wiki/Makefile"&gt;Makefile&lt;/a&gt; to build an
application with this container simply by setting the variable &lt;em&gt;BUILD_IN_DOCKER&lt;/em&gt;
to  &lt;em&gt;1&lt;/em&gt;. Then the prebuilt image is downloaded and instantiated to execute the
&lt;a class="reference external" href="https://en.wikipedia.org/wiki/Make_(software)"&gt;make&lt;/a&gt; command.&lt;/p&gt;
&lt;p&gt;By default, this feature is configured to be used with the &lt;a class="reference external" href="https://www.docker.com"&gt;Docker&lt;/a&gt; engine,
but it is possible to override some variables from the build environment
either to use a custom prebuilt image, either use another engine or to use
custom engine parameters.&lt;/p&gt;
&lt;p&gt;Then here, we will use these environments variable to instantiate a container
with &lt;a class="reference external" href="https://podman.io"&gt;Podman&lt;/a&gt; (instead of &lt;a class="reference external" href="https://www.docker.com"&gt;Docker&lt;/a&gt;) and with the required parameters.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="tip-of-the-day"&gt;
&lt;h2&gt;Tip of the day&lt;/h2&gt;
&lt;p&gt;In the following example, we build the Helloworld application for a STM32
Discovery board.
To do that we specify the engine by setting the variable &lt;em&gt;DOCKER&lt;/em&gt; to the value
&lt;em&gt;podman&lt;/em&gt;. The variable &lt;em&gt;DOCKER_USER&lt;/em&gt; is set empty because in the variable
&lt;em&gt;DOCKER_RUN_FLAGS&lt;/em&gt; the parameter &lt;em&gt;--userns&lt;/em&gt; is set to &lt;em&gt;keep-id&lt;/em&gt; to map the
uid:gid of the current rootless user (from host) with the values that will be
used into the container.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;export&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;BUILD_IN_DOCKER&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;
&lt;span class="nb"&gt;export&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;DOCKER&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;podman&amp;quot;&lt;/span&gt;
&lt;span class="nb"&gt;export&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;DOCKER_USER&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="nb"&gt;export&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;DOCKER_RUN_FLAGS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;--rm -i -t --security-opt seccomp=unconfined --security-opt label=disable --userns=keep-id&amp;quot;&lt;/span&gt;
&lt;span class="nb"&gt;export&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;DOCKER_MAKE_ARGS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;-j&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;nproc&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;

make&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;BOARD&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;stm32l476g-disco
Launching&lt;span class="w"&gt; &lt;/span&gt;build&lt;span class="w"&gt; &lt;/span&gt;container&lt;span class="w"&gt; &lt;/span&gt;using&lt;span class="w"&gt; &lt;/span&gt;image&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;riot/riotbuild:latest&amp;quot;&lt;/span&gt;.
podman&lt;span class="w"&gt; &lt;/span&gt;run&lt;span class="w"&gt; &lt;/span&gt;--rm&lt;span class="w"&gt; &lt;/span&gt;-i&lt;span class="w"&gt; &lt;/span&gt;-t&lt;span class="w"&gt; &lt;/span&gt;--security-opt&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;seccomp&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;unconfined&lt;span class="w"&gt; &lt;/span&gt;--security-opt&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;label&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;disable&lt;span class="w"&gt; &lt;/span&gt;--userns&lt;span class="o"&gt;=&lt;/span&gt;keep-id&lt;span class="w"&gt; &lt;/span&gt;-v&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;/usr/share/zoneinfo/Europe/Paris:/etc/localtime:ro&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-v&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;/home/tperrot/dev/tprrt/pwm-ramp-gen/RIOT:/data/riotbuild/riotbase:delegated&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-e&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;RIOTBASE=/data/riotbuild/riotbase&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-e&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;CCACHE_BASEDIR=/data/riotbuild/riotbase&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-e&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;BUILD_DIR=/data/riotbuild/riotbase/build&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-v&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;/home/tperrot/dev/tprrt/pwm-ramp-gen:/data/riotbuild/riotproject:delegated&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-e&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;RIOTPROJECT=/data/riotbuild/riotproject&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-e&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;RIOTCPU=/data/riotbuild/riotbase/cpu&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-e&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;RIOTBOARD=/data/riotbuild/riotbase/boards&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-e&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;RIOTMAKE=/data/riotbuild/riotbase/makefiles&amp;#39;&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;-v&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;/home/tperrot/dev/tprrt/pwm-ramp-gen/.git:/home/tperrot/dev/tprrt/pwm-ramp-gen/.git:delegated&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-e&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;BOARD=stm32l476g-disco&amp;#39;&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;-w&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;/data/riotbuild/riotproject/&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;riot/riotbuild:latest&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;make&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;BOARD=stm32l476g-disco&amp;#39;&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;-j8
Building&lt;span class="w"&gt; &lt;/span&gt;application&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;hello-world&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;stm32l476g-disco&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;with&lt;span class="w"&gt; &lt;/span&gt;MCU&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;stm32&amp;quot;&lt;/span&gt;.

&lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;cloning&lt;span class="w"&gt; &lt;/span&gt;stm32cmsis
fatal:&lt;span class="w"&gt; &lt;/span&gt;not&lt;span class="w"&gt; &lt;/span&gt;a&lt;span class="w"&gt; &lt;/span&gt;git&lt;span class="w"&gt; &lt;/span&gt;repository:&lt;span class="w"&gt; &lt;/span&gt;/data/riotbuild/riotbase/../.git/modules/RIOT
Cloning&lt;span class="w"&gt; &lt;/span&gt;into&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;/data/riotbuild/riotbase/cpu/stm32/include/vendor/cmsis/l4&amp;#39;&lt;/span&gt;...
remote:&lt;span class="w"&gt; &lt;/span&gt;Enumerating&lt;span class="w"&gt; &lt;/span&gt;objects:&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;364&lt;/span&gt;,&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;done&lt;/span&gt;.
remote:&lt;span class="w"&gt; &lt;/span&gt;Counting&lt;span class="w"&gt; &lt;/span&gt;objects:&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;100&lt;/span&gt;%&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;364&lt;/span&gt;/364&lt;span class="o"&gt;)&lt;/span&gt;,&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;done&lt;/span&gt;.
remote:&lt;span class="w"&gt; &lt;/span&gt;Compressing&lt;span class="w"&gt; &lt;/span&gt;objects:&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;100&lt;/span&gt;%&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;71&lt;/span&gt;/71&lt;span class="o"&gt;)&lt;/span&gt;,&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;done&lt;/span&gt;.
remote:&lt;span class="w"&gt; &lt;/span&gt;Total&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;364&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;delta&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;309&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;,&lt;span class="w"&gt; &lt;/span&gt;reused&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;344&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;delta&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;289&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;,&lt;span class="w"&gt; &lt;/span&gt;pack-reused&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;
Receiving&lt;span class="w"&gt; &lt;/span&gt;objects:&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;100&lt;/span&gt;%&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;364&lt;/span&gt;/364&lt;span class="o"&gt;)&lt;/span&gt;,&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;709&lt;/span&gt;.56&lt;span class="w"&gt; &lt;/span&gt;KiB&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;561&lt;/span&gt;.00&lt;span class="w"&gt; &lt;/span&gt;KiB/s,&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;done&lt;/span&gt;.
Resolving&lt;span class="w"&gt; &lt;/span&gt;deltas:&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;100&lt;/span&gt;%&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;309&lt;/span&gt;/309&lt;span class="o"&gt;)&lt;/span&gt;,&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;done&lt;/span&gt;.
HEAD&lt;span class="w"&gt; &lt;/span&gt;is&lt;span class="w"&gt; &lt;/span&gt;now&lt;span class="w"&gt; &lt;/span&gt;at&lt;span class="w"&gt; &lt;/span&gt;e442c72&lt;span class="w"&gt; &lt;/span&gt;Release&lt;span class="w"&gt; &lt;/span&gt;v1.6.1
&lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;updating&lt;span class="w"&gt; &lt;/span&gt;stm32cmsis&lt;span class="w"&gt; &lt;/span&gt;/data/riotbuild/riotbase/cpu/stm32/include/vendor/cmsis/l4/.pkg-state.git-downloaded
&lt;span class="nb"&gt;echo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;e442c72651e8d4757f6562acc14da949644944ce&lt;span class="w"&gt;   &lt;/span&gt;&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;/data/riotbuild/riotbase/cpu/stm32/include/vendor/cmsis/l4/.pkg-state.git-downloaded
&lt;span class="o"&gt;[&lt;/span&gt;INFO&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;patch&lt;span class="w"&gt; &lt;/span&gt;stm32cmsis
&lt;span class="s2"&gt;&amp;quot;make&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-C&lt;span class="w"&gt; &lt;/span&gt;/data/riotbuild/riotbase/boards/stm32l476g-disco
&lt;span class="s2"&gt;&amp;quot;make&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-C&lt;span class="w"&gt; &lt;/span&gt;/data/riotbuild/riotbase/core
&lt;span class="s2"&gt;&amp;quot;make&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-C&lt;span class="w"&gt; &lt;/span&gt;/data/riotbuild/riotbase/cpu/stm32
&lt;span class="s2"&gt;&amp;quot;make&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-C&lt;span class="w"&gt; &lt;/span&gt;/data/riotbuild/riotbase/drivers
&lt;span class="s2"&gt;&amp;quot;make&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-C&lt;span class="w"&gt; &lt;/span&gt;/data/riotbuild/riotbase/sys
&lt;span class="s2"&gt;&amp;quot;make&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-C&lt;span class="w"&gt; &lt;/span&gt;/data/riotbuild/riotbase/cpu/cortexm_common
&lt;span class="s2"&gt;&amp;quot;make&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-C&lt;span class="w"&gt; &lt;/span&gt;/data/riotbuild/riotbase/cpu/stm32/periph
&lt;span class="s2"&gt;&amp;quot;make&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-C&lt;span class="w"&gt; &lt;/span&gt;/data/riotbuild/riotbase/drivers/periph_common
&lt;span class="s2"&gt;&amp;quot;make&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-C&lt;span class="w"&gt; &lt;/span&gt;/data/riotbuild/riotbase/cpu/stm32/stmclk
&lt;span class="s2"&gt;&amp;quot;make&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-C&lt;span class="w"&gt; &lt;/span&gt;/data/riotbuild/riotbase/sys/auto_init
&lt;span class="s2"&gt;&amp;quot;make&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-C&lt;span class="w"&gt; &lt;/span&gt;/data/riotbuild/riotbase/cpu/cortexm_common/periph
&lt;span class="s2"&gt;&amp;quot;make&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-C&lt;span class="w"&gt; &lt;/span&gt;/data/riotbuild/riotbase/cpu/stm32/vectors
&lt;span class="s2"&gt;&amp;quot;make&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-C&lt;span class="w"&gt; &lt;/span&gt;/data/riotbuild/riotbase/sys/malloc_thread_safe
&lt;span class="s2"&gt;&amp;quot;make&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-C&lt;span class="w"&gt; &lt;/span&gt;/data/riotbuild/riotbase/sys/newlib_syscalls_default
&lt;span class="s2"&gt;&amp;quot;make&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-C&lt;span class="w"&gt; &lt;/span&gt;/data/riotbuild/riotbase/sys/pm_layered
&lt;span class="s2"&gt;&amp;quot;make&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-C&lt;span class="w"&gt; &lt;/span&gt;/data/riotbuild/riotbase/sys/stdio_uart
&lt;span class="w"&gt;   &lt;/span&gt;text&lt;span class="w"&gt;    &lt;/span&gt;data&lt;span class="w"&gt;     &lt;/span&gt;bss&lt;span class="w"&gt;     &lt;/span&gt;dec&lt;span class="w"&gt;     &lt;/span&gt;hex&lt;span class="w"&gt; &lt;/span&gt;filename
&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="m"&gt;8900&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="m"&gt;112&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="m"&gt;2300&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;&lt;span class="m"&gt;11312&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;2c30&lt;span class="w"&gt; &lt;/span&gt;/data/riotbuild/riotproject/bin/stm32l476g-disco/hello-world.elf
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
</content><category term="riot-os"/><category term="container"/><category term="podman"/><category term="riot-os"/></entry><entry><title>How the Busybox's chrt applet works</title><link href="https://tprrt.tupi.fr/busybox-chrt-dissection.html" rel="alternate"/><published>2020-09-08T19:20:00+02:00</published><updated>2025-06-11T14:53:00+02:00</updated><author><name>tperrot</name></author><id>tag:tprrt.tupi.fr,2020-09-08:/busybox-chrt-dissection.html</id><summary type="html">&lt;p class="first last"&gt;This article details the implementation of the &lt;em&gt;chrt&lt;/em&gt; applet from &lt;a class="reference external" href="https://www.busybox.net"&gt;Busybox&lt;/a&gt;.&lt;/p&gt;
</summary><content type="html">&lt;div class="section" id="introduction"&gt;
&lt;h2&gt;Introduction&lt;/h2&gt;
&lt;p&gt;In this article, I will dissect how the &lt;em&gt;chrt&lt;/em&gt; applet from the release 1.32.0 of &lt;a class="reference external" href="https://www.busybox.net"&gt;Busybox&lt;/a&gt; works, what it does, etc.&lt;/p&gt;
&lt;p&gt;This command is a Linux utils allowing to consult or to modify the scheduling attributes of a process.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;chrt&lt;span class="w"&gt; &lt;/span&gt;-m
SCHED_OTHER&lt;span class="w"&gt; &lt;/span&gt;min/max&lt;span class="w"&gt; &lt;/span&gt;priority&lt;span class="w"&gt;    &lt;/span&gt;:&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;/0
SCHED_FIFO&lt;span class="w"&gt; &lt;/span&gt;min/max&lt;span class="w"&gt; &lt;/span&gt;priority&lt;span class="w"&gt;     &lt;/span&gt;:&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;/99
SCHED_RR&lt;span class="w"&gt; &lt;/span&gt;min/max&lt;span class="w"&gt; &lt;/span&gt;priority&lt;span class="w"&gt;       &lt;/span&gt;:&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;/99
SCHED_BATCH&lt;span class="w"&gt; &lt;/span&gt;min/max&lt;span class="w"&gt; &lt;/span&gt;priority&lt;span class="w"&gt;    &lt;/span&gt;:&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;/0
SCHED_IDLE&lt;span class="w"&gt; &lt;/span&gt;min/max&lt;span class="w"&gt; &lt;/span&gt;priority&lt;span class="w"&gt;     &lt;/span&gt;:&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;/0
SCHED_DEADLINE&lt;span class="w"&gt; &lt;/span&gt;min/max&lt;span class="w"&gt; &lt;/span&gt;priority&lt;span class="w"&gt; &lt;/span&gt;:&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;/0

pidof&lt;span class="w"&gt; &lt;/span&gt;firefox
&lt;span class="m"&gt;6987&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;6851&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;6825&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;6816&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;6800&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;6771&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;6767&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;6761&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;6720&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;6611&lt;/span&gt;

chrt&lt;span class="w"&gt; &lt;/span&gt;-p&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;6987&lt;/span&gt;
pid&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;6987&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;s current scheduling policy: SCHED_OTHER&lt;/span&gt;
&lt;span class="s1"&gt;pid 6987&amp;#39;&lt;/span&gt;s&lt;span class="w"&gt; &lt;/span&gt;current&lt;span class="w"&gt; &lt;/span&gt;scheduling&lt;span class="w"&gt; &lt;/span&gt;priority:&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;

sudo&lt;span class="w"&gt; &lt;/span&gt;chrt&lt;span class="w"&gt; &lt;/span&gt;-f&lt;span class="w"&gt; &lt;/span&gt;-p&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;6987&lt;/span&gt;
chrt&lt;span class="w"&gt; &lt;/span&gt;-p&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;6987&lt;/span&gt;
pid&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;6987&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;s current scheduling policy: SCHED_FIFO&lt;/span&gt;
&lt;span class="s1"&gt;pid 6987&amp;#39;&lt;/span&gt;s&lt;span class="w"&gt; &lt;/span&gt;current&lt;span class="w"&gt; &lt;/span&gt;scheduling&lt;span class="w"&gt; &lt;/span&gt;priority:&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a class="reference external" href="https://www.busybox.net"&gt;Busybox&lt;/a&gt; provides an applet whose size, once compiled, is ten times smaller than that of the binary implementation
and with some limitations.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="the-dissection"&gt;
&lt;h2&gt;The dissection&lt;/h2&gt;
&lt;p&gt;The implementation of the &lt;em&gt;chrt&lt;/em&gt; applet is in the file &lt;a class="reference external" href="https://elixir.bootlin.com/busybox/1.32.0/source/util-linux/chrt.c"&gt;util-linux/chrt.c&lt;/a&gt; that containing several functions which are
called in the main function of this applet.&lt;/p&gt;
&lt;p&gt;The main function of this applet is divided into three main parts:
- the first parses the command options
- the second prints the scheduler's information
- the last one, to apply scheduler changes in case of a set&lt;/p&gt;
&lt;p&gt;At start of main, the character string containing the options are parsed to obtain a bitfield easier to use:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;opt&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;getopt32&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;argv&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;^&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;+&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;mprfobi&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="se"&gt;\0&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="cm"&gt;/* only one policy accepted: */&lt;/span&gt;
&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;r--fobi:f--robi:o--rfbi:b--rfoi:i--rfob&amp;quot;&lt;/span&gt;
&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If the (-m) is set then the min and max valid priorities for each scheduling policies are shown and the command exits:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;opt&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;OPT_m&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cm"&gt;/* print min/max and exit */&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;show_min_max&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SCHED_OTHER&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;show_min_max&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SCHED_FIFO&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;show_min_max&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SCHED_RR&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;show_min_max&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SCHED_BATCH&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;show_min_max&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SCHED_IDLE&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;fflush_stdout_and_exit&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;EXIT_SUCCESS&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The function &lt;em&gt;show_min_max&lt;/em&gt; uses the Posix functions &lt;em&gt;sched_get_priority_max&lt;/em&gt; and &lt;em&gt;sched_get_priority_min&lt;/em&gt; from the
standard C library to send a syscall to the kernel in order to obtain the min and max values accepted by each policy:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;max&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;sched_get_priority_max&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pol&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="n"&gt;min&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;sched_get_priority_min&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pol&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;max&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;min&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;fmt&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;SCHED_%s not supported&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Otherwise the required options and arguments to show or to apply real-time attributes of a process:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;//if (opt &amp;amp; OPT_r)&lt;/span&gt;
&lt;span class="c1"&gt;//  policy = SCHED_RR; - default, already set&lt;/span&gt;
&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;opt&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;OPT_f&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;policy&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;SCHED_FIFO&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;opt&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;OPT_o&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;policy&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;SCHED_OTHER&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;opt&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;OPT_b&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;policy&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;SCHED_BATCH&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;opt&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;OPT_i&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;policy&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;SCHED_IDLE&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="n"&gt;argv&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;optind&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;argv&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;bb_show_usage&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;opt&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;OPT_p&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;pid_str&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;argv&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;argv&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cm"&gt;/* &amp;quot;-p PRIO PID [...]&amp;quot; */&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="n"&gt;priority&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pid_str&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="n"&gt;pid_str&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;argv&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="cm"&gt;/* else &amp;quot;-p PID&amp;quot;, and *argv == NULL */&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;pid&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;xatoul_range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pid_str&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="kt"&gt;unsigned&lt;/span&gt;&lt;span class="p"&gt;)(&lt;/span&gt;&lt;span class="kt"&gt;pid_t&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;ULONG_MAX&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;priority&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;argv&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!*&lt;/span&gt;&lt;span class="n"&gt;argv&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="n"&gt;bb_show_usage&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Then the applet uses the Posix function &lt;em&gt;sched_getscheduler&lt;/em&gt; provides by the standard C library to obtain the scheduling attributes of the process specified by the pid.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nl"&gt;print_rt_info&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;pol&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;sched_getscheduler&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pid&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pol&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="n"&gt;bb_perror_msg_and_die&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;can&amp;#39;t %cet pid %u&amp;#39;s policy&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;g&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;pid&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Finally, when the &lt;em&gt;chrt&lt;/em&gt; applet is used to modify scheduling attributes then the Posix function &lt;em&gt;sched_getscheduler&lt;/em&gt; is used and the new scheduling attributes are showed:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sched_setscheduler&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pid&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;policy&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;sp&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;bb_perror_msg_and_die&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;can&amp;#39;t %cet pid %u&amp;#39;s policy&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;s&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;pid&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;argv&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cm"&gt;/* &amp;quot;-p PRIO PID [...]&amp;quot; */&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;goto&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;print_rt_info&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The function &lt;em&gt;sched_setscheduler&lt;/em&gt; and &lt;em&gt;sched_getscheduler&lt;/em&gt; will send a syscall to the scheduler subsystem of the kernel Linux.
This subsystem also exposes this information from &lt;em&gt;/proc&lt;/em&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;cat&lt;span class="w"&gt; &lt;/span&gt;/proc/6987/sched
WebExtensions&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;6987&lt;/span&gt;,&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;#threads: 23)&lt;/span&gt;
-------------------------------------------------------------------
se.exec_start&lt;span class="w"&gt;                                &lt;/span&gt;:&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="m"&gt;4421312&lt;/span&gt;.640001
se.vruntime&lt;span class="w"&gt;                                  &lt;/span&gt;:&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="m"&gt;344438&lt;/span&gt;.942254
se.sum_exec_runtime&lt;span class="w"&gt;                          &lt;/span&gt;:&lt;span class="w"&gt;         &lt;/span&gt;&lt;span class="m"&gt;38238&lt;/span&gt;.466094
se.nr_migrations&lt;span class="w"&gt;                             &lt;/span&gt;:&lt;span class="w"&gt;                 &lt;/span&gt;&lt;span class="m"&gt;6811&lt;/span&gt;
nr_switches&lt;span class="w"&gt;                                  &lt;/span&gt;:&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="m"&gt;49452&lt;/span&gt;
nr_voluntary_switches&lt;span class="w"&gt;                        &lt;/span&gt;:&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="m"&gt;21749&lt;/span&gt;
nr_involuntary_switches&lt;span class="w"&gt;                      &lt;/span&gt;:&lt;span class="w"&gt;                &lt;/span&gt;&lt;span class="m"&gt;27703&lt;/span&gt;
se.load.weight&lt;span class="w"&gt;                               &lt;/span&gt;:&lt;span class="w"&gt;              &lt;/span&gt;&lt;span class="m"&gt;1048576&lt;/span&gt;
se.runnable_weight&lt;span class="w"&gt;                           &lt;/span&gt;:&lt;span class="w"&gt;              &lt;/span&gt;&lt;span class="m"&gt;1048576&lt;/span&gt;
se.avg.load_sum&lt;span class="w"&gt;                              &lt;/span&gt;:&lt;span class="w"&gt;                 &lt;/span&gt;&lt;span class="m"&gt;3415&lt;/span&gt;
se.avg.runnable_load_sum&lt;span class="w"&gt;                     &lt;/span&gt;:&lt;span class="w"&gt;                 &lt;/span&gt;&lt;span class="m"&gt;3415&lt;/span&gt;
se.avg.util_sum&lt;span class="w"&gt;                              &lt;/span&gt;:&lt;span class="w"&gt;              &lt;/span&gt;&lt;span class="m"&gt;3497621&lt;/span&gt;
se.avg.load_avg&lt;span class="w"&gt;                              &lt;/span&gt;:&lt;span class="w"&gt;                   &lt;/span&gt;&lt;span class="m"&gt;74&lt;/span&gt;
se.avg.runnable_load_avg&lt;span class="w"&gt;                     &lt;/span&gt;:&lt;span class="w"&gt;                   &lt;/span&gt;&lt;span class="m"&gt;74&lt;/span&gt;
se.avg.util_avg&lt;span class="w"&gt;                              &lt;/span&gt;:&lt;span class="w"&gt;                   &lt;/span&gt;&lt;span class="m"&gt;74&lt;/span&gt;
se.avg.last_update_time&lt;span class="w"&gt;                      &lt;/span&gt;:&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="m"&gt;4421312640000&lt;/span&gt;
se.avg.util_est.ewma&lt;span class="w"&gt;                         &lt;/span&gt;:&lt;span class="w"&gt;                   &lt;/span&gt;&lt;span class="m"&gt;75&lt;/span&gt;
se.avg.util_est.enqueued&lt;span class="w"&gt;                     &lt;/span&gt;:&lt;span class="w"&gt;                   &lt;/span&gt;&lt;span class="m"&gt;75&lt;/span&gt;
policy&lt;span class="w"&gt;                                       &lt;/span&gt;:&lt;span class="w"&gt;                    &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;
prio&lt;span class="w"&gt;                                         &lt;/span&gt;:&lt;span class="w"&gt;                  &lt;/span&gt;&lt;span class="m"&gt;120&lt;/span&gt;
clock-delta&lt;span class="w"&gt;                                  &lt;/span&gt;:&lt;span class="w"&gt;                   &lt;/span&gt;&lt;span class="m"&gt;89&lt;/span&gt;
mm-&amp;gt;numa_scan_seq&lt;span class="w"&gt;                            &lt;/span&gt;:&lt;span class="w"&gt;                    &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;
numa_pages_migrated&lt;span class="w"&gt;                          &lt;/span&gt;:&lt;span class="w"&gt;                    &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;
numa_preferred_nid&lt;span class="w"&gt;                           &lt;/span&gt;:&lt;span class="w"&gt;                   &lt;/span&gt;-1
total_numa_faults&lt;span class="w"&gt;                            &lt;/span&gt;:&lt;span class="w"&gt;                    &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;
&lt;span class="nv"&gt;current_node&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;,&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;numa_group_id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;
numa_faults&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;node&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;task_private&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;task_shared&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;group_private&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;group_shared&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="limitations"&gt;
&lt;h2&gt;Limitations&lt;/h2&gt;
&lt;p&gt;Below a short list of limitations that I observed during my analysis of this applet.&lt;/p&gt;
&lt;div class="section" id="resetting-scheduling-policy"&gt;
&lt;h3&gt;Resetting scheduling policy&lt;/h3&gt;
&lt;p&gt;The &lt;em&gt;chrt&lt;/em&gt; applet doesn't offer an option (-R) to specify if the scheduling policy should be applied or reset when a
process forks to create children. This feature, introduced since Linux 2.6.32, can be only enabled or disabled at the
build of busybox and it is applied on all scheduling attributes modifications done with this applet.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="deadline-support"&gt;
&lt;h3&gt;Deadline support&lt;/h3&gt;
&lt;p&gt;The &lt;em&gt;chrt&lt;/em&gt; applet doesn't provide the required scheduling options (-d, -T, -P and -D) to set the deadline scheduling attributes of a process.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</content><category term="busybox"/><category term="busybox"/><category term="chrt"/><category term="dissection"/><category term="beginner"/></entry><entry><title>Build an embedded Linux in less than 15 minutes</title><link href="https://tprrt.tupi.fr/build-an-embedded-linux-in-fifteen-min.html" rel="alternate"/><published>2020-06-27T13:01:00+02:00</published><updated>2025-06-11T14:53:00+02:00</updated><author><name>tperrot</name></author><id>tag:tprrt.tupi.fr,2020-06-27:/build-an-embedded-linux-in-fifteen-min.html</id><summary type="html">&lt;p class="first last"&gt;This article will explain how to build a minimal embedded Linux, in less than 15 minutes, and without a build framework.&lt;/p&gt;
</summary><content type="html">&lt;div class="section" id="introduction"&gt;
&lt;h2&gt;Introduction&lt;/h2&gt;
&lt;p&gt;Since some years, I haven't built an embedded Linux without using a framework, like &lt;a class="reference external" href="https://openembedded.org"&gt;Open Embedded&lt;/a&gt; from the &lt;a class="reference external" href="https://yoctoproject.org"&gt;Yocto&lt;/a&gt;
project.
Then here, I wanted to make a guide to help you to build quickly, from &amp;quot;scratch&amp;quot; a very minimal embedded Linux to boot a
target.
The following examples have been written to boot a virtual Qemu target but, they can be adapted to boot a real target.
Moreover, the build environment will be bootstrapped with a prebuilt cross-toolchain, I have chosen to use one provided
by &lt;a class="reference external" href="https://toolchains.bootlin.com"&gt;Bootlin&lt;/a&gt; and using glibc.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="setup-the-environment"&gt;
&lt;h2&gt;Setup the environment&lt;/h2&gt;
&lt;p&gt;First, it is required to install the packages that are needed to install and use the cross-toolchain but also to compile the host tools and to provide Qemu:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;The Ncurses libraries are only required to execute the command &lt;cite&gt;make menuconfig&lt;/cite&gt;.&lt;/li&gt;
&lt;li&gt;The certificates and wget will be used to download the prebuilt toolchain.&lt;/li&gt;
&lt;li&gt;In the same way, git will be used to checkout the source of &lt;a class="reference external" href="https://busybox.net"&gt;Busybox&lt;/a&gt; and &lt;a class="reference external" href="https://www.kernel.org"&gt;Linux&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;The Qemu packages will be used to emulate system platform and to execute static binaries cross-compiled for aarch64 on the x86-64 host.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;apt&lt;span class="w"&gt; &lt;/span&gt;update
apt&lt;span class="w"&gt; &lt;/span&gt;install&lt;span class="w"&gt; &lt;/span&gt;-y&lt;span class="w"&gt; &lt;/span&gt;--no-install-recommends&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;bc&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;build-essential&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;ca-certificates&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;cpio&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;file&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;flex&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;git&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;ipxe-qemu&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;libncurses5-dev&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;libncursesw5-dev&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;libssl-dev&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;qemu&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;qemu-system-aarch64&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;qemu-user-static&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;wget
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now, it is time to download and install the prebuilt toolchain:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;mkdir&lt;span class="w"&gt; &lt;/span&gt;~/src
&lt;span class="nb"&gt;cd&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;~/src
wget&lt;span class="w"&gt; &lt;/span&gt;https://toolchains.bootlin.com/downloads/releases/toolchains/aarch64/tarballs/aarch64--glibc--stable-2020.08-1.tar.bz2
tar&lt;span class="w"&gt; &lt;/span&gt;xvjf&lt;span class="w"&gt; &lt;/span&gt;aarch64--glibc--stable-2020.08-1.tar.bz2
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Once the toolchain has been extracted you have to set the required environment variables to cross-compile binaries:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;PATH&lt;/tt&gt;: It shall be extended so that the cross-tools from the cross-toolchain will be available from the environment&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;CROSS_COMPILE&lt;/tt&gt;: In order to clarify the prefix used by the cross-tools&lt;/li&gt;
&lt;li&gt;&lt;tt class="docutils literal"&gt;ARCH&lt;/tt&gt;: The architecture of the target platform&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ls&lt;span class="w"&gt; &lt;/span&gt;~/src/aarch64--glibc--stable-2020.08-1/bin/*gcc
~/src/aarch64--glibc--stable-2020.08-1/bin/aarch64-linux-gcc

&lt;span class="nb"&gt;export&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;PATH&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;~/src/aarch64--glibc--stable-2020.08-1/bin:&lt;span class="nv"&gt;$PATH&lt;/span&gt;
&lt;span class="nb"&gt;export&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;CROSS_COMPILE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;aarch64-linux-
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now, it is possible to call the cross-tools from the shell:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;aarch64-linux-gcc&lt;span class="w"&gt; &lt;/span&gt;-v
Using&lt;span class="w"&gt; &lt;/span&gt;built-in&lt;span class="w"&gt; &lt;/span&gt;specs.
&lt;span class="nv"&gt;COLLECT_GCC&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;~/src/aarch64--glibc--stable-2020.08-1/bin/aarch64-linux-gcc.br_real
&lt;span class="nv"&gt;COLLECT_LTO_WRAPPER&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;~/src/aarch64--glibc--stable-2020.08-1/bin/../libexec/gcc/aarch64-buildroot-linux-gnu/9.3.0/lto-wrapper
Target:&lt;span class="w"&gt; &lt;/span&gt;aarch64-buildroot-linux-gnu
&amp;lt;...&amp;gt;
Thread&lt;span class="w"&gt; &lt;/span&gt;model:&lt;span class="w"&gt; &lt;/span&gt;posix
gcc&lt;span class="w"&gt; &lt;/span&gt;version&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;9&lt;/span&gt;.3.0&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;Buildroot&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;2020&lt;/span&gt;.08-14-ge5a2a90&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Concerning the variable &lt;tt class="docutils literal"&gt;PATH&lt;/tt&gt; this one will be set afterwards because its value depends on the binary that will be built.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="build-the-linux-kernel"&gt;
&lt;h2&gt;Build the Linux kernel&lt;/h2&gt;
&lt;p&gt;So, the environment is ready to pull the sources of the latest stable branch of the kernel &lt;a class="reference external" href="https://www.kernel.org"&gt;Linux&lt;/a&gt; and to build them:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;git&lt;span class="w"&gt; &lt;/span&gt;clone&lt;span class="w"&gt; &lt;/span&gt;git://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git
&lt;span class="nb"&gt;cd&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;linux
git&lt;span class="w"&gt; &lt;/span&gt;checkout&lt;span class="w"&gt; &lt;/span&gt;-b&lt;span class="w"&gt; &lt;/span&gt;local/linux-5.4.y&lt;span class="w"&gt; &lt;/span&gt;origin/linux-5.4.y
&lt;span class="c1"&gt;# git show HEAD&lt;/span&gt;

&lt;span class="nb"&gt;export&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;ARCH&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;arm64

make&lt;span class="w"&gt; &lt;/span&gt;defconfig
&lt;span class="w"&gt;  &lt;/span&gt;HOSTCC&lt;span class="w"&gt;  &lt;/span&gt;scripts/basic/fixdep
&lt;span class="w"&gt;  &lt;/span&gt;HOSTCC&lt;span class="w"&gt;  &lt;/span&gt;scripts/kconfig/conf.o
&lt;span class="w"&gt;  &lt;/span&gt;HOSTCC&lt;span class="w"&gt;  &lt;/span&gt;scripts/kconfig/confdata.o
&lt;span class="w"&gt;  &lt;/span&gt;HOSTCC&lt;span class="w"&gt;  &lt;/span&gt;scripts/kconfig/expr.o
&lt;span class="w"&gt;  &lt;/span&gt;LEX&lt;span class="w"&gt;     &lt;/span&gt;scripts/kconfig/lexer.lex.c
&lt;span class="w"&gt;  &lt;/span&gt;YACC&lt;span class="w"&gt;    &lt;/span&gt;scripts/kconfig/parser.tab.&lt;span class="o"&gt;[&lt;/span&gt;ch&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;HOSTCC&lt;span class="w"&gt;  &lt;/span&gt;scripts/kconfig/lexer.lex.o
&lt;span class="w"&gt;  &lt;/span&gt;HOSTCC&lt;span class="w"&gt;  &lt;/span&gt;scripts/kconfig/parser.tab.o
&lt;span class="w"&gt;  &lt;/span&gt;HOSTCC&lt;span class="w"&gt;  &lt;/span&gt;scripts/kconfig/preprocess.o
&lt;span class="w"&gt;  &lt;/span&gt;HOSTCC&lt;span class="w"&gt;  &lt;/span&gt;scripts/kconfig/symbol.o
&lt;span class="w"&gt;  &lt;/span&gt;HOSTLD&lt;span class="w"&gt;  &lt;/span&gt;scripts/kconfig/conf
***&lt;span class="w"&gt; &lt;/span&gt;Default&lt;span class="w"&gt; &lt;/span&gt;configuration&lt;span class="w"&gt; &lt;/span&gt;is&lt;span class="w"&gt; &lt;/span&gt;based&lt;span class="w"&gt; &lt;/span&gt;on&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;defconfig&amp;#39;&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;
&lt;span class="c1"&gt;# configuration written to .config&lt;/span&gt;
&lt;span class="c1"&gt;#&lt;/span&gt;

&lt;span class="c1"&gt;# make menuconfig&lt;/span&gt;

make&lt;span class="w"&gt; &lt;/span&gt;-j&lt;span class="k"&gt;$(&lt;/span&gt;nproc&lt;span class="k"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&amp;lt;...&amp;gt;
&lt;span class="w"&gt;  &lt;/span&gt;AR&lt;span class="w"&gt;      &lt;/span&gt;drivers/net/ethernet/built-in.a
&lt;span class="w"&gt;  &lt;/span&gt;AR&lt;span class="w"&gt;      &lt;/span&gt;drivers/net/built-in.a
&lt;span class="w"&gt;  &lt;/span&gt;AR&lt;span class="w"&gt;      &lt;/span&gt;drivers/built-in.a
&lt;span class="w"&gt;  &lt;/span&gt;GEN&lt;span class="w"&gt;     &lt;/span&gt;.version
&lt;span class="w"&gt;  &lt;/span&gt;CHK&lt;span class="w"&gt;     &lt;/span&gt;include/generated/compile.h
&lt;span class="w"&gt;  &lt;/span&gt;LD&lt;span class="w"&gt;      &lt;/span&gt;vmlinux.o
&lt;span class="w"&gt;  &lt;/span&gt;MODPOST&lt;span class="w"&gt; &lt;/span&gt;vmlinux.o
&lt;span class="w"&gt;  &lt;/span&gt;MODINFO&lt;span class="w"&gt; &lt;/span&gt;modules.builtin.modinfo
&lt;span class="w"&gt;  &lt;/span&gt;LD&lt;span class="w"&gt;      &lt;/span&gt;.tmp_vmlinux.kallsyms1
&lt;span class="w"&gt;  &lt;/span&gt;KSYM&lt;span class="w"&gt;    &lt;/span&gt;.tmp_vmlinux.kallsyms1.o
&lt;span class="w"&gt;  &lt;/span&gt;LD&lt;span class="w"&gt;      &lt;/span&gt;.tmp_vmlinux.kallsyms2
&lt;span class="w"&gt;  &lt;/span&gt;KSYM&lt;span class="w"&gt;    &lt;/span&gt;.tmp_vmlinux.kallsyms2.o
&lt;span class="w"&gt;  &lt;/span&gt;LD&lt;span class="w"&gt;      &lt;/span&gt;vmlinux
&lt;span class="w"&gt;  &lt;/span&gt;SORTEX&lt;span class="w"&gt;  &lt;/span&gt;vmlinux
&lt;span class="w"&gt;  &lt;/span&gt;SYSMAP&lt;span class="w"&gt;  &lt;/span&gt;System.map
&lt;span class="w"&gt;  &lt;/span&gt;Building&lt;span class="w"&gt; &lt;/span&gt;modules,&lt;span class="w"&gt; &lt;/span&gt;stage&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;.
&lt;span class="w"&gt;  &lt;/span&gt;MODPOST&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;531&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;modules
&lt;span class="w"&gt;  &lt;/span&gt;OBJCOPY&lt;span class="w"&gt; &lt;/span&gt;arch/arm64/boot/Image
&lt;span class="w"&gt;  &lt;/span&gt;GZIP&lt;span class="w"&gt;    &lt;/span&gt;arch/arm64/boot/Image.gz
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The command &lt;tt class="docutils literal"&gt;make defconfig&lt;/tt&gt; will apply the default configuration for the target platform (cf. &lt;tt class="docutils literal"&gt;ARCH=arm64&lt;/tt&gt;), and the
compilation will be performed by &lt;tt class="docutils literal"&gt;make &lt;span class="pre"&gt;-j$(nproc)&lt;/span&gt;&lt;/tt&gt;.&lt;/p&gt;
&lt;p&gt;The commands &lt;tt class="docutils literal"&gt;git show HEAD&lt;/tt&gt; and &lt;tt class="docutils literal"&gt;make defconfig&lt;/tt&gt; are optional:
- the first is useful to verify that the latest commit corresponding to the latest tag of the branch &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;linux-5.4.y&lt;/span&gt;&lt;/tt&gt;.
- the second can be used if you want to customize the kernel configuration.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;NB&lt;/em&gt;. The kernel &lt;a class="reference external" href="https://www.kernel.org"&gt;Linux&lt;/a&gt; but also &lt;a class="reference external" href="https://busybox.net"&gt;Busybox&lt;/a&gt; and some projects use &lt;a class="reference external" href="https://www.kernel.org/doc/html/latest/kbuild/kbuild.html"&gt;Kbuild&lt;/a&gt; to manage the build options&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="populate-the-sysroot"&gt;
&lt;h2&gt;Populate the sysroot&lt;/h2&gt;
&lt;p&gt;The easy way to bootstrap a sysroot is to use &lt;a class="reference external" href="https://busybox.net"&gt;Busybox&lt;/a&gt; that has been created to offer common UNIX tools into a single
executable and it is size-optimized. To create a sysroot, it is only required to add a few configuration files.&lt;/p&gt;
&lt;p&gt;The steps to pull and build &lt;a class="reference external" href="https://busybox.net"&gt;Busybox&lt;/a&gt; are similar to those of the kernel &lt;a class="reference external" href="https://www.kernel.org"&gt;Linux&lt;/a&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;git&lt;span class="w"&gt; &lt;/span&gt;clone&lt;span class="w"&gt; &lt;/span&gt;git://git.busybox.net/busybox
&lt;span class="nb"&gt;cd&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;busybox
git&lt;span class="w"&gt; &lt;/span&gt;checkout&lt;span class="w"&gt; &lt;/span&gt;-b&lt;span class="w"&gt; &lt;/span&gt;local/1_32_stable&lt;span class="w"&gt; &lt;/span&gt;origin/1_32_stable
&lt;span class="c1"&gt;# git show HEAD&lt;/span&gt;

&lt;span class="nb"&gt;export&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;ARCH&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;aarch64
&lt;span class="nb"&gt;export&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;LDFLAGS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;--static&amp;quot;&lt;/span&gt;

make&lt;span class="w"&gt; &lt;/span&gt;defconfig
&lt;span class="c1"&gt;# make menuconfig&lt;/span&gt;
make&lt;span class="w"&gt; &lt;/span&gt;-j&lt;span class="k"&gt;$(&lt;/span&gt;nproc&lt;span class="k"&gt;)&lt;/span&gt;

make&lt;span class="w"&gt; &lt;/span&gt;install
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Here, the &lt;em&gt;LDFLAGS&lt;/em&gt; is set to force static linking of &lt;a class="reference external" href="https://busybox.net"&gt;Busybox&lt;/a&gt; quickly, but it is also possible to use
&lt;em&gt;make menuconfig&lt;/em&gt; to set &lt;em&gt;CONFIG_STATIC=y&lt;/em&gt;. The advantage of the static executable is that it can be tested with Qemu:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;qemu-aarch64-static&lt;span class="w"&gt; &lt;/span&gt;busybox&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;echo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Hello!&amp;quot;&lt;/span&gt;
Hello!
qemu-aarch64-static&lt;span class="w"&gt; &lt;/span&gt;busybox&lt;span class="w"&gt; &lt;/span&gt;date
Sat&lt;span class="w"&gt; &lt;/span&gt;Jun&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;27&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;15&lt;/span&gt;:06:41&lt;span class="w"&gt; &lt;/span&gt;UTC&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;2020&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The binary &lt;em&gt;qemu-aarch64-static&lt;/em&gt; allows to execute a binary built for another architecture on the host computer, for
example here it allows to execute the &lt;a class="reference external" href="https://busybox.net"&gt;Busybox&lt;/a&gt; binary compiled for an aarch64 target on a x86-64 host.&lt;/p&gt;
&lt;p&gt;The last command &lt;em&gt;make install&lt;/em&gt; created a tree into the &lt;em&gt;_install&lt;/em&gt; directory that can be used to populate the sysroot:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ls&lt;span class="w"&gt; &lt;/span&gt;-l&lt;span class="w"&gt; &lt;/span&gt;_install
total&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;4&lt;/span&gt;
drwxr-xr-x.&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;tperrot&lt;span class="w"&gt; &lt;/span&gt;tperrot&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;974&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;Nov&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;30&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;15&lt;/span&gt;:22&lt;span class="w"&gt; &lt;/span&gt;bin
lrwxrwxrwx.&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;tperrot&lt;span class="w"&gt; &lt;/span&gt;tperrot&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="m"&gt;11&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;Nov&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;30&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;15&lt;/span&gt;:22&lt;span class="w"&gt; &lt;/span&gt;linuxrc&lt;span class="w"&gt; &lt;/span&gt;-&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;bin/busybox
drwxr-xr-x.&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;tperrot&lt;span class="w"&gt; &lt;/span&gt;tperrot&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;986&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;Nov&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;30&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;15&lt;/span&gt;:22&lt;span class="w"&gt; &lt;/span&gt;sbin
drwxr-xr-x.&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;tperrot&lt;span class="w"&gt; &lt;/span&gt;tperrot&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="m"&gt;14&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;Nov&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;30&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;15&lt;/span&gt;:22&lt;span class="w"&gt; &lt;/span&gt;usr

ls&lt;span class="w"&gt; &lt;/span&gt;-l&lt;span class="w"&gt; &lt;/span&gt;_install/bin
&amp;lt;...&amp;gt;
lrwxrwxrwx.&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;tperrot&lt;span class="w"&gt; &lt;/span&gt;tperrot&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="m"&gt;7&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;Nov&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;30&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;15&lt;/span&gt;:22&lt;span class="w"&gt; &lt;/span&gt;umount&lt;span class="w"&gt; &lt;/span&gt;-&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;busybox
lrwxrwxrwx.&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;tperrot&lt;span class="w"&gt; &lt;/span&gt;tperrot&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="m"&gt;7&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;Nov&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;30&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;15&lt;/span&gt;:22&lt;span class="w"&gt; &lt;/span&gt;uname&lt;span class="w"&gt; &lt;/span&gt;-&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;busybox
lrwxrwxrwx.&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;tperrot&lt;span class="w"&gt; &lt;/span&gt;tperrot&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="m"&gt;7&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;Nov&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;30&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;15&lt;/span&gt;:22&lt;span class="w"&gt; &lt;/span&gt;usleep&lt;span class="w"&gt; &lt;/span&gt;-&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;busybox
lrwxrwxrwx.&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;tperrot&lt;span class="w"&gt; &lt;/span&gt;tperrot&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="m"&gt;7&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;Nov&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;30&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;15&lt;/span&gt;:22&lt;span class="w"&gt; &lt;/span&gt;vi&lt;span class="w"&gt; &lt;/span&gt;-&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;busybox
lrwxrwxrwx.&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;tperrot&lt;span class="w"&gt; &lt;/span&gt;tperrot&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="m"&gt;7&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;Nov&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;30&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;15&lt;/span&gt;:22&lt;span class="w"&gt; &lt;/span&gt;watch&lt;span class="w"&gt; &lt;/span&gt;-&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;busybox
lrwxrwxrwx.&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;tperrot&lt;span class="w"&gt; &lt;/span&gt;tperrot&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="m"&gt;7&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;Nov&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;30&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;15&lt;/span&gt;:22&lt;span class="w"&gt; &lt;/span&gt;zcat&lt;span class="w"&gt; &lt;/span&gt;-&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;busybox
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In order, to finalize this minimal sysroot, it is required to create a rcS init script:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;mkdir&lt;span class="w"&gt; &lt;/span&gt;_install/proc&lt;span class="w"&gt; &lt;/span&gt;_install/sys&lt;span class="w"&gt; &lt;/span&gt;_install/dev&lt;span class="w"&gt; &lt;/span&gt;_install/etc&lt;span class="w"&gt; &lt;/span&gt;_install/etc/init.d
cat&lt;span class="w"&gt; &lt;/span&gt;&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;_install/etc/init.d/rcS&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;lt;&amp;lt; EOF&lt;/span&gt;
&lt;span class="s"&gt;#!/bin/sh&lt;/span&gt;
&lt;span class="s"&gt;mount -t proc none /proc&lt;/span&gt;
&lt;span class="s"&gt;mount -t sysfs none /sys&lt;/span&gt;
&lt;span class="s"&gt;/sbin/mdev -s&lt;/span&gt;
&lt;span class="s"&gt;[ ! -h /etc/mtab ]  &amp;amp;&amp;amp; ln -s /proc/mounts /etc/mtab&lt;/span&gt;
&lt;span class="s"&gt;[ ! -f /etc/resolv.conf ] &amp;amp;&amp;amp; cat /proc/net/pnp &amp;gt; /etc/resolv.conf&lt;/span&gt;
&lt;span class="s"&gt;EOF&lt;/span&gt;
chmod&lt;span class="w"&gt; &lt;/span&gt;+x&lt;span class="w"&gt; &lt;/span&gt;_install/etc/init.d/rcS
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="build-the-filesystem"&gt;
&lt;h2&gt;Build the filesystem&lt;/h2&gt;
&lt;p&gt;The target of this step is to package the sysroot tree into a filesystem that can be mounted by the kernel.
There is two available possibilities, either build a &lt;em&gt;ramfs&lt;/em&gt; or a &lt;em&gt;rootfs&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Globally, the difference between both is that:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;the ramfs is a very simple filesystem that can be used by the kernel to create a block device into the RAM space from an archive.&lt;/li&gt;
&lt;li&gt;the rootfs is a filesystem mounted from a non volatile device by the kernel.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;For more information about the difference between the ramfs and the rootfs, you can you refer to the &lt;a class="reference external" href="https://www.kernel.org/doc/html/latest/filesystems/ramfs-rootfs-initramfs.html"&gt;kernel documentation&lt;/a&gt;.&lt;/p&gt;
&lt;div class="section" id="build-a-ramfs"&gt;
&lt;h3&gt;Build a ramfs&lt;/h3&gt;
&lt;p&gt;To build the ramfs we will use &lt;em&gt;cpio&lt;/em&gt; and &lt;em&gt;gzip&lt;/em&gt; to construct the compressed archive after modifying the rights:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;mkdir&lt;span class="w"&gt; &lt;/span&gt;_rootfs
rsync&lt;span class="w"&gt; &lt;/span&gt;-a&lt;span class="w"&gt; &lt;/span&gt;_install/&lt;span class="w"&gt; &lt;/span&gt;_rootfs
chown&lt;span class="w"&gt; &lt;/span&gt;-R&lt;span class="w"&gt; &lt;/span&gt;root:root&lt;span class="w"&gt; &lt;/span&gt;_rootfs
&lt;span class="nb"&gt;cd&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;_rootfs
find&lt;span class="w"&gt; &lt;/span&gt;.&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;cpio&lt;span class="w"&gt; &lt;/span&gt;-o&lt;span class="w"&gt; &lt;/span&gt;--format&lt;span class="o"&gt;=&lt;/span&gt;newc&lt;span class="w"&gt; &lt;/span&gt;&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;../rootfs.cpio
&lt;span class="nb"&gt;cd&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;..
gzip&lt;span class="w"&gt; &lt;/span&gt;-c&lt;span class="w"&gt; &lt;/span&gt;rootfs.cpio&lt;span class="w"&gt; &lt;/span&gt;&amp;gt;&lt;span class="w"&gt; &lt;/span&gt;rootfs.cpio.gz
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="build-a-rootfs"&gt;
&lt;h3&gt;Build a rootfs&lt;/h3&gt;
&lt;p&gt;To build the rootfs, the first step is to create an empty binary blob that will be mounted into a loop device to be
formatted to create a ext3 filesystem. Then the tree can be copied and the rights updated.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;dd&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/dev/zero&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;of&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;rootfs.img&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;bs&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;1M&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;count&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;10&lt;/span&gt;
mke2fs&lt;span class="w"&gt; &lt;/span&gt;-j&lt;span class="w"&gt; &lt;/span&gt;rootfs.img
mkdir&lt;span class="w"&gt; &lt;/span&gt;_rootfs
mount&lt;span class="w"&gt; &lt;/span&gt;-o&lt;span class="w"&gt; &lt;/span&gt;loop&lt;span class="w"&gt; &lt;/span&gt;rootfs.img&lt;span class="w"&gt; &lt;/span&gt;_rootfs
rsync&lt;span class="w"&gt; &lt;/span&gt;-a&lt;span class="w"&gt; &lt;/span&gt;_install/&lt;span class="w"&gt; &lt;/span&gt;_rootfs
chown&lt;span class="w"&gt; &lt;/span&gt;-R&lt;span class="w"&gt; &lt;/span&gt;root:root&lt;span class="w"&gt; &lt;/span&gt;_rootfs
sync
umount&lt;span class="w"&gt; &lt;/span&gt;_rootfs
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="boot-the-target"&gt;
&lt;h2&gt;Boot the target&lt;/h2&gt;
&lt;p&gt;Following, the qemu commands to boot the minimal embedded Linux system that has been built.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# With the ramfs&lt;/span&gt;
qemu-system-aarch64&lt;span class="w"&gt; &lt;/span&gt;-nographic&lt;span class="w"&gt; &lt;/span&gt;-no-reboot&lt;span class="w"&gt; &lt;/span&gt;-machine&lt;span class="w"&gt; &lt;/span&gt;virt&lt;span class="w"&gt; &lt;/span&gt;-cpu&lt;span class="w"&gt; &lt;/span&gt;cortex-a57&lt;span class="w"&gt; &lt;/span&gt;-smp&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-m&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;256&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;-kernel&lt;span class="w"&gt; &lt;/span&gt;~/src/linux/arch/arm64/boot/Image&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;-initrd&lt;span class="w"&gt; &lt;/span&gt;~/src/busybox/rootfs.cpio.gz&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;-append&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;panic=5 ro ip=dhcp root=/dev/ram rdinit=/sbin/init&amp;quot;&lt;/span&gt;

&lt;span class="c1"&gt;# With the rootfs&lt;/span&gt;
qemu-system-aarch64&lt;span class="w"&gt; &lt;/span&gt;-nographic&lt;span class="w"&gt; &lt;/span&gt;-no-reboot&lt;span class="w"&gt; &lt;/span&gt;-machine&lt;span class="w"&gt; &lt;/span&gt;virt&lt;span class="w"&gt; &lt;/span&gt;-cpu&lt;span class="w"&gt; &lt;/span&gt;cortex-a57&lt;span class="w"&gt; &lt;/span&gt;-smp&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-m&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;256&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;-kernel&lt;span class="w"&gt; &lt;/span&gt;~/src/linux/arch/arm64/boot/Image&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;-append&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;panic=5 ro ip=dhcp root=/dev/vda&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;-drive&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;file&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;~/src/busybox/rootfs.img,format&lt;span class="o"&gt;=&lt;/span&gt;raw,if&lt;span class="o"&gt;=&lt;/span&gt;none,id&lt;span class="o"&gt;=&lt;/span&gt;hd0&lt;span class="w"&gt; &lt;/span&gt;-device&lt;span class="w"&gt; &lt;/span&gt;virtio-blk-device,drive&lt;span class="o"&gt;=&lt;/span&gt;hd0
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Then the target will be boot to shell, &lt;em&gt;&amp;quot;It's alive!&amp;quot;&lt;/em&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;.000000&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;Booting&lt;span class="w"&gt; &lt;/span&gt;Linux&lt;span class="w"&gt; &lt;/span&gt;on&lt;span class="w"&gt; &lt;/span&gt;physical&lt;span class="w"&gt; &lt;/span&gt;CPU&lt;span class="w"&gt; &lt;/span&gt;0x0000000000&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;0x411fd070&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;.000000&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;Linux&lt;span class="w"&gt; &lt;/span&gt;version&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;.10.0-rc5&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;tperrot@27ea4a863f61&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;aarch64-linux-gcc.br_real&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;Buildroot&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;2020&lt;/span&gt;.08-14-ge5a2a90&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;9&lt;/span&gt;.3.0,&lt;span class="w"&gt; &lt;/span&gt;GNU&lt;span class="w"&gt; &lt;/span&gt;ld&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;GNU&lt;span class="w"&gt; &lt;/span&gt;Binutils&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;.33.1&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;#1 SMP PREEMPT Mon Nov 30 14:40:05 UTC 2020&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;.000000&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;Machine&lt;span class="w"&gt; &lt;/span&gt;model:&lt;span class="w"&gt; &lt;/span&gt;linux,dummy-virt
&amp;lt;...&amp;gt;
&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;.858346&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;Sending&lt;span class="w"&gt; &lt;/span&gt;DHCP&lt;span class="w"&gt; &lt;/span&gt;requests&lt;span class="w"&gt; &lt;/span&gt;.,&lt;span class="w"&gt; &lt;/span&gt;OK
&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;.870558&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;IP-Config:&lt;span class="w"&gt; &lt;/span&gt;Got&lt;span class="w"&gt; &lt;/span&gt;DHCP&lt;span class="w"&gt; &lt;/span&gt;answer&lt;span class="w"&gt; &lt;/span&gt;from&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;10&lt;/span&gt;.0.2.2,&lt;span class="w"&gt; &lt;/span&gt;my&lt;span class="w"&gt; &lt;/span&gt;address&lt;span class="w"&gt; &lt;/span&gt;is&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;10&lt;/span&gt;.0.2.15
&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;.870909&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;IP-Config:&lt;span class="w"&gt; &lt;/span&gt;Complete:
&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;.871199&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nv"&gt;device&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;eth0,&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;hwaddr&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;52&lt;/span&gt;:54:00:12:34:56,&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;ipaddr&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;10&lt;/span&gt;.0.2.15,&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;mask&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;255&lt;/span&gt;.255.255.0,&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;gw&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;10&lt;/span&gt;.0.2.2
&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;.871566&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nv"&gt;host&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;10&lt;/span&gt;.0.2.15,&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;domain&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;,&lt;span class="w"&gt; &lt;/span&gt;nis-domain&lt;span class="o"&gt;=(&lt;/span&gt;none&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;.871825&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nv"&gt;bootserver&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;10&lt;/span&gt;.0.2.2,&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;rootserver&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;10&lt;/span&gt;.0.2.2,&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;rootpath&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;.871866&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="nv"&gt;nameserver0&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;10&lt;/span&gt;.0.2.3
&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;.872389&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;.875863&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;ALSA&lt;span class="w"&gt; &lt;/span&gt;device&lt;span class="w"&gt; &lt;/span&gt;list:
&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;.876151&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt;   &lt;/span&gt;No&lt;span class="w"&gt; &lt;/span&gt;soundcards&lt;span class="w"&gt; &lt;/span&gt;found.
&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;.879353&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;uart-pl011&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;9000000&lt;/span&gt;.pl011:&lt;span class="w"&gt; &lt;/span&gt;no&lt;span class="w"&gt; &lt;/span&gt;DMA&lt;span class="w"&gt; &lt;/span&gt;platform&lt;span class="w"&gt; &lt;/span&gt;data
&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;.920237&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;Freeing&lt;span class="w"&gt; &lt;/span&gt;unused&lt;span class="w"&gt; &lt;/span&gt;kernel&lt;span class="w"&gt; &lt;/span&gt;memory:&lt;span class="w"&gt; &lt;/span&gt;5952K
&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;.921223&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;Run&lt;span class="w"&gt; &lt;/span&gt;/sbin/init&lt;span class="w"&gt; &lt;/span&gt;as&lt;span class="w"&gt; &lt;/span&gt;init&lt;span class="w"&gt; &lt;/span&gt;process

Please&lt;span class="w"&gt; &lt;/span&gt;press&lt;span class="w"&gt; &lt;/span&gt;Enter&lt;span class="w"&gt; &lt;/span&gt;to&lt;span class="w"&gt; &lt;/span&gt;activate&lt;span class="w"&gt; &lt;/span&gt;this&lt;span class="w"&gt; &lt;/span&gt;console.
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
</content><category term="linux"/><category term="busybox"/><category term="embedded"/><category term="intermediate"/><category term="linux"/><category term="qemu"/></entry><entry><title>My blog opening</title><link href="https://tprrt.tupi.fr/my-blog-opening.html" rel="alternate"/><published>2020-05-28T16:50:00+02:00</published><updated>2025-06-11T14:53:00+02:00</updated><author><name>tperrot</name></author><id>tag:tprrt.tupi.fr,2020-05-28:/my-blog-opening.html</id><summary type="html">&lt;p class="first last"&gt;Why I chose to open a new blog and a quick description of the subjects that will be covered.&lt;/p&gt;
</summary><content type="html">&lt;p&gt;Welcome,&lt;/p&gt;
&lt;p&gt;After closing my last blog seventeen years ago, in order to share my knowledge and my little experiments about
embedded open source. As you might have guessed, this blog will mainly focus on embedded Linux operating systems,
but also about open firmware and rtos, as well as related topics like virtualization, security, etc.&lt;/p&gt;
&lt;p&gt;I hope you will like the articles of this blog, enjoy the reading.&lt;/p&gt;
</content><category term="misc"/><category term="blog"/></entry></feed>